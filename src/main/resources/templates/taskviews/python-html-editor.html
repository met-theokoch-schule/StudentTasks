<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code-Editor</title>
    <link th:href="@{/css/python-html-editor.css}" href="../../static/css/python-html-editor.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.2/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.2/mode-python.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.2/mode-html.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.2/mode-css.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.2/theme-monokai.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.2/ext-language_tools.js"></script>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@9.1.6/marked.min.js"></script>
</head>

<body>
    <div class="mycontainer">
        <!-- Header mit Buttons und Dropdown -->
        <header class="header">
            <div class="button-group">
                <button id="runBtn" class="btn btn-primary">▶ Ausführen</button>
            </div>
            <div class="controls">
                <span id="save-status" class="fas fa-circle text-muted" style="font-size: 0.8rem; cursor: help;"
                    data-title="Bereit zum Speichern"></span>
                <button id="saveButton" class="btn btn-success btn-sm"><i class='fas fa-save'></i> Speichern</button>
                <button id="submitButton" class="btn btn-primary btn-sm"><i class='fas fa-paper-plane'></i>
                    Abgeben</button>

            </div>
            <div class="controls">
                <label for="fontSizeSelect"><i class="fas fa-text-height"></i></label>
                <select id="fontSizeSelect" class="dropdown">
                    <option value="12">12pt</option>
                    <option value="14" selected>14pt</option>
                    <option value="18">18pt</option>
                    <option value="24">24pt</option>
                    <option value="30">30pt</option>
                </select>
                <a href="/student/dashboard" class="btn btn-outline-secondary btn-sm"><i class='fas fa-house'></i></a>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Editor Panel -->
            <div class="editor-panel">
                <div class="tab-container">
                    <div class="tabs">
                        <button class="editor-tab active" data-tab="python">Python</button>
                        <button class="editor-tab" data-tab="html">HTML</button>
                        <button class="editor-tab" data-tab="css">CSS</button>
                    </div>
                </div>
                <div class="editor-container">
                    <div id="pythonEditor" class="editor-content active"></div>
                    <div id="htmlEditor" class="editor-content"></div>
                    <div id="cssEditor" class="editor-content"></div>
                </div>
            </div>

            <!-- Resizable Splitter -->
            <div class="splitter" id="splitter"></div>

            <!-- Output Panel -->
            <div class="output-panel">
                <div class="tab-container">
                    <div class="tabs">
                        <button class="output-tab active" data-output-tab="result">HTML-Vorschau</button>
                        <button class="output-tab" data-output-tab="task">Aufgabe</button>
                        <button class="output-tab" data-output-tab="tutorial">Tutorial</button>
                    </div>
                </div>
                <div class="output-container">
                    <div id="resultOutput" class="output-content active">
                        <iframe id="htmlOutput" class="html-output"></iframe>
                    </div>
                    <div id="taskOutput" class="output-content">
                        <!-- Markdown-gerenderte Anleitung -->
                    </div>
                    <div id="tutorialOutput" class="output-content">
                    </div>
                </div>
            </div>
        </main>
    </div>

     <div id="task-save-url" style="display: none"
        th:attr="data-url=${(isTeacherView ?: false) and (userTaskId != null) ? '/api/tasks/usertasks/' + userTaskId + '/content' : '/api/tasks/' + task.id + '/content'}"
        data-url="/dev/save"></div>
    <div id="task-submit-url" style="display: none"
        th:attr="data-url=${(isTeacherView ?: false) and (userTaskId != null) ? '' : '/api/tasks/' + task.id + '/submit'}"
        data-url="/dev/submit"></div>
    <div id="currentContent" style="display: none" th:text="${currentContent}"></div>
    <div id="description" style="display: none" th:text="${task.description}">*Test*</div>
    <div id="tutorial" style="display: none" th:utext="${task.tutorial}"></div>

    <script th:src="@{/js/python-html-editor.js}" src="../../static/js/python-html-editor.js"></script>
    <script th:src="@{/js/ping.js}"></script>
</body>

</html>