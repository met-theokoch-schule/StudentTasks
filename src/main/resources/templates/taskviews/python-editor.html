<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code-Editor</title>
    <link th:href="@{/css/python-editor.css}" href="../../static/css/python-editor.css?v=20251211-v2" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.2/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.2/mode-python.js"></script>
    <script th:src="@{/js/ace-theme-a11y-dark.js}" src="../../static/js/ace-theme-a11y-dark.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.2/ext-language_tools.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.2/ext-static_highlight.js"></script>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@9.1.6/marked.min.js"></script>
</head>

<body>
    <!-- Versteckte Content-Divs fÃ¼r JavaScript -->
    <a id="default-link" style="display: none;" href="/static/" th:href="@{/}"></a>
    <div class="mycontainer">
        <!-- Header mit Buttons und Dropdown -->
        <header class="header">
            <div class="button-group">
                <button id="runBtn" class="btn btn-primary" disabled style="opacity: 0.6;"><i class="fas fa-play"></i> AusfÃ¼hren</button>
            </div>
            <div class="controls">
                <span id="save-status" class="fas fa-circle text-muted" style="font-size: 0.8rem; cursor: help;"
                    data-title="Bereit zum Speichern"></span>
                <button id="saveButton" class="btn btn-success btn-sm"><i class='fas fa-save'></i> Speichern</button>
                <button id="submitButton" class="btn btn-primary btn-sm"><i class='fas fa-paper-plane'></i>
                    Abgeben</button>

            </div>
            <div class="controls">
                
                <label for="fontSizeSelect"><i class="fas fa-text-height"></i></label>
                <select id="fontSizeSelect" class="dropdown">
                    <option value="12">12pt</option>
                    <option value="14" selected>14pt</option>
                    <option value="18">18pt</option>
                    <option value="24">24pt</option>
                    <option value="30">30pt</option>
                </select>
                <button id="resetBtn" class="btn btn-outline-secondary btn-sm" title="Auf Standardwert zurÃ¼cksetzen"><i
                    class='fas fa-undo'></i></button>
                <button id="fullscreenBtn" class="btn btn-outline-secondary btn-sm" title="Vollbild"><i
                        class='fas fa-expand'></i></button>
                <a th:href="@{/student/dashboard}" href="/student/dashboard" class="btn btn-outline-secondary btn-sm"><i
                        class='fas fa-house'></i></a>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Editor Panel -->
            <div class="editor-panel">
                <div class="tab-container">
                    <div class="tabs">
                        <button class="editor-tab active" data-tab="python">Python</button>
                    </div>
                </div>
                <div class="editor-container">
                    <div id="pythonEditor" class="editor-content active"></div>
                </div>
            </div>

            <!-- Resizable Splitter -->
            <div class="splitter" id="splitter"></div>

            <!-- Output Panel -->
            <div class="output-panel">
                <div class="tab-container">
                    <div class="tabs">
                        <button class="output-tab active" data-output-tab="result">Ausgabe</button>
                        <button class="output-tab" data-output-tab="task">Aufgabe</button>
                        <button class="output-tab" data-output-tab="tutorial">Tutorial</button>
                    </div>
                    <button id="clearOutputBtn" class="btn btn-outline-secondary btn-sm"><i
                            class="fas fa-trash"></i></button>
                </div>
                <div class="output-container">
                    <div id="resultOutput" class="output-content active">
                        <div id="objectViewerContainer" class="object-viewer-container" style="display: none;">
                            <div id="objectViewer" class="object-viewer"></div>
                        </div>
                        <div id="consoleOutput" class="console-output"></div>
                    </div>
                    <div id="taskOutput" class="output-content">
                        <!-- Markdown-gerenderte Anleitung -->
                    </div>
                    <div id="tutorialOutput" class="output-content">
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="task-save-url" style="display: none"
        th:attr="data-url=${(isTeacherView ?: false) and (userTaskId != null) ? 'api/tasks/usertasks/' + userTaskId + '/content' : 'api/tasks/' + task.id + '/content'}"
        data-url="/dev/save"></div>
    <div id="task-submit-url" style="display: none"
        th:attr="data-url=${(isTeacherView ?: false) and (userTaskId != null) ? '' : 'api/tasks/' + task.id + '/submit'}"
        data-url="/dev/submit"></div>
    <div id="currentContent" style="display: none" th:text="${currentContent}"></div>
    <div id="defaultSubmission" style="display: none" th:text="${task.defaultSubmission} "></div>
    <div id="description" style="display: none" th:text="${task.description}">Im folgenden findest du drei Code-BlÃ¶cke, die versuchen, einem Objekt der Klasse Mensch zu ermÃ¶glichen, ein Objekt der Klasse Hund zu streicheln.

# Aufgaben
- Kopiere Code 1 in den Editor und untersuche, was passiert. Ersetze ihn durch Code 2 und untersuche erneut.
- Finde heraus, warum der eine Code funktioniert und der andere nicht! *Tipp: SchlagwÃ¶rter zum Suchen nach Hinweisen sind "private Attribute" und "mangling"!*
- Ersetze den Code nun durch Code 3 und untersuche auch diesen. Wie unterscheidet sich dieser Ansatz von dem bisherigen?
- Entscheide, welches Vorgehen "besser" ist, um das Problem der "streichelnden Objekte" zu lÃ¶sen. *Tipp: BerÃ¼cksichtige besonders den Fall, dass unterschiedliche Programmier\*innen an dem Projekt arbeiten!*

# Code 1
```python
# Hier ist ein Hund definiert
class Hund:
    def __init__(self, name):
        self.name = name 
        self.glueck = 0

# Hier ist ein Mensch, der den Hund streicheln will
class Mensch:
    def __init__(self, name):
        self.__name = name

    def streicheln(self, tier):
        print(f"{self.__name} streichelt {tier.name}!")
        tier.glueck += 100

#Ab hier wird losgestreichelt - oder?
hund1 = Hund("Wuffi")
mensch1 = Mensch("Elisabeth")
mensch1.streicheln(hund1)
```

# Code 2
```python
# Hier ist ein Hund definiert
class Hund:
    def __init__(self, name):
        self.__name = name 
        self.__glueck = 0


# Hier ist ein Mensch, der den Hund streicheln will
class Mensch:
    def __init__(self, name):
        self.__name = name

    def streicheln(self, tier):
        print(f"{self.__name} streichelt {tier.__name}!")
        tier.__glueck += 100



#Ab hier wird losgestreichelt - oder?
hund1 = Hund("Wuffi")
mensch1 = Mensch("Elisabeth")
mensch1.streicheln(hund1)
```

# Code 3
```python
# Hier ist ein Hund definiert
class Hund:
    def __init__(self, name):
        self.__name = name 
        self.__glueck = 0

    def wirdGestreichelt(self, streichlerName):
        print(f"{streichlerName} streichelt {self.__name}!")
        self.__glueck += 1

# Hier ist ein Mensch, der den Hund streicheln will
class Mensch:
    def __init__(self, name):
        self.__name = name

    def streicheln(self, tier):
        tier.wirdGestreichelt(self.__name)



#Ab hier wird losgestreichelt - oder?
hund1 = Hund("Wuffi")
mensch1 = Mensch("Elisabeth")
mensch1.streicheln(hund1)
```</div>
    <div id="tutorial" style="display: none" th:utext="${task.tutorial}">[
          {
            "title": "Die Feuermagierin und die Monster",
            "content": `# Die Mission

![Bild einer Feuermagierin, die Monster mit einem Feuerring angreift](https://theokoch.schule/informatik/feuermagierin.png "Feuermagierin Artemis greift Monster mit Feuerring an")

In dieser Aufgabe wirst du mit **Objekten in Arrays** arbeiten.  
Du lernst dabei:
- wie man **mehrere Objekte** in einem **Array** speichert,
- und wie man mit **Schleifen** alle Objekte eines Arrays verarbeitet.

Dabei wiederholst du, dass du bereits gelernt hast, wie eine Klasse **Methoden anderer Objekte** aufrufen kann.

**Ziel:** Die **Heldin** soll mit einem **Feuerring-Zauber** zehn  Monster angreifen.  
Jedes Monster verliert dabei Lebenspunkte â€“ und die Magierin verbraucht Magiepunkte.`
          },

          {
            "title": "Aufgabe",
            "content": `# Aufgabe: Der Feuerring

Im vorbereiteten Programm sind zwei Klassen enthalten:  
- **Heldin** mit Name und magischer Energie  
- **Monster** mit Name und Lebenspunkten  

AuÃŸerdem wird ein **Array aus 10 Monstern** erzeugt.

Tipp: Kopiere dir den Code wieder zu 
<a href="https://www.online-python.com/" target="_blank">Online Python â€“ Ã¶ffne den Editor</a> um das Problem mit der Anzeige zu umgehen.

---

### Deine Aufgabe

1. **Untersuche** den vorgegebenen Code. Wie werden die 10 Monster erzeugt und im Array gespeichert?

2. **Implementiere** in der Klasse \`Heldin\` die Methode \`feuerring\`  

Die Methode soll:
- alle Monster im Array **nacheinander angreifen**,
- jedem Monster **10 Lebenspunkte** abziehen,
- am Ende ausgeben, wie viele Lebenspunkte jedes Monster noch hat.

3. **Starte das Programm** und Ã¼berprÃ¼fe, ob sich die Lebenspunkte aller Monster verÃ¤ndert haben.`
          },

          {
            "title": "Zusatzaufgaben",
            "content": `# Zusatzaufgaben

        Wenn du den Feuerring erfolgreich implementiert hast, erweitere dein Programm!

        ### ðŸ”¹ Zusatz 1 â€“ Besiegte Monster
        Erweitere \`Monster.status()\`, sodass Monster mit 0 Lebenspunkten als **â€ž(besiegt)â€œ** angezeigt werden.

        ### ðŸ”¹ Zusatz 2 â€“ Magieverbrauch
        Lasse die Heldin pro getroffenem Monster **5 Magiepunkte** verlieren. Wenn keine Magie mehr vorhanden ist, soll der Zauber **abbrechen**.

        ### ðŸ”¹ Zusatz 3 â€“ ZufÃ¤lliger Schaden
        Nutze \`random.randint(8, 15)\` und erzeuge **zufÃ¤lligen Schaden** pro Monster im Bereich **8â€“15**.

        ### ðŸ”¹ Zusatz 4 â€“ Zusammenfassung
        Gib nach dem Angriff aus, wie viele Monster **besiegt** wurden und wie viel **Magie** Artemis noch hat.`
          },

          {
            "title": "MusterlÃ¶sung",
            "content": "```python\n# Hier ist die Heldin definiert\nclass Heldin:\n    def __init__(self, name):\n        self.__name = name\n        self.__magie = 100\n\n    def status(self):\n        print(f\"Heldin: {self.__name}, Magie = {self.__magie}\")\n        print()\n\n    # MusterlÃ¶sung: Feuerring greift alle Monster an (fester Schaden: 10)\n    def feuerring(self, monster_array):\n        print(f\"{self.__name} wirkt FEUERRING! \")\n        for i in range(len(monster_array)):\n            monster_array[i].treffer(10)\n        print(\"Der Feuerring verglÃ¼ht...\\n\")\n\n\n# Hier ist ein Monster definiert\nclass Monster:\n    def __init__(self, name):\n        self.__name = name\n        self.__leben = 50\n\n    def treffer(self, schaden):\n        self.__leben -= schaden\n        if self.__leben < 0:\n            self.__leben = 0\n        print(f\"{self.__name} erleidet {schaden} Schaden (Leben: {self.__leben})\")\n\n    def status(self):\n        print(f\"Monster: {self.__name}, Leben = {self.__leben}\")\n\n\n# --- Hier beginnt das Abenteuer ---\n\n# Das Array fÃ¼r die 10 Monster (feste GrÃ¶ÃŸe, ohne append)\nmonster_array = [None] * 10\n\n# 10 Monster werden erzeugt und im Array gespeichert\nfor i in range(10):\n    monster_name = \"Monster_\" + str(i + 1)\n    monster_array[i] = Monster(monster_name)\n\n# Die Heldin betritt die Szene\nheldin1 = Heldin(\"Artemis\")\n\n# Statusausgabe vor dem Angriff\nheldin1.status()\nprint(\"Vor dem Angriff:\")\nfor i in range(10):\n    monster_array[i].status()\nprint()\n\n# Heldin setzt den Feuerring ein (MusterlÃ¶sung)\nheldin1.feuerring(monster_array)\n\n# Statusausgabe nach dem Angriff\nprint(\"Nach dem Angriff:\")\nfor i in range(10):\n    monster_array[i].status()\n```\n"
          }
        ]

    </div>

    <script th:src="@{/js/code-analyzer.js}" src="../../static/js/code-analyzer.js?v=20251211-v10"></script>
    <script th:src="@{/js/object-viewer.js}" src="../../static/js/object-viewer.js?v=20251211-v10"></script>
    <script th:src="@{/js/python-editor.js}" src="../../static/js/python-editor.js?v=20251211-v10"></script>
    <script th:src="@{/js/ping.js}"></script>
</body>

</html>