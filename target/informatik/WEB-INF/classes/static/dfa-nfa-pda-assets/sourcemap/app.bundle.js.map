{"version":3,"file":"dfa-nfa-pda-assets/app.bundle.3690171cc1cfbbf8a882.js","mappings":"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","sources":["webpack:///./src/app/experimental/panels/PanelContainer.js","webpack:///./src/app/util/ColorHelper.js","webpack:///./src/app/session/manager/notification/Notification.js","webpack:///./src/app/session/manager/notification/components/SequenceNotificationLayout.js","webpack:///./src/app/session/manager/notification/NotificationManager.js","webpack:///./src/app/util/logger/Logger.js","webpack:///./src/app/components/iconset/ExpandDownIcon.js","webpack:///./src/app/experimental/drawer/DrawerView.js","webpack:///./src/app/components/iconset/UndoIcon.js","webpack:///./src/app/components/iconset/RedoIcon.js","webpack:///./src/app/experimental/TaskViewButtonBar.js","webpack:///./src/app/experimental/tooltip/TooltipView.js","webpack:///./src/app/experimental/components/UploadDropZone.js","webpack:///./src/app/session/manager/notification/components/NotificationView.js","webpack:///./src/app/experimental/components/IconStateButton.js","webpack:///./src/app/components/iconset/FullscreenIcon.js","webpack:///./src/app/components/iconset/FullscreenExitIcon.js","webpack:///./src/app/experimental/components/FullscreenWidget.js","webpack:///./src/app/experimental/menus/export/ExportPanel.js","webpack:///./src/app/experimental/menus/language/LanguagePanel.js","webpack:///./src/app/modules/Modules.js","webpack:///./src/app/experimental/menus/moduleloader/ModuleLoaderPanel.js","webpack:///./src/app/util/ColorTransform.js","webpack:///./src/app/util/file/export/Downloader.js","webpack:///./src/app/util/file/export/TextDownloader.js","webpack:///./src/app/util/file/FileHelper.js","webpack:///./src/app/util/file/export/SVGImageDownloader.js","webpack:///./src/app/util/file/export/JSONDownloader.js","webpack:///./src/app/util/file/export/DownloadManager.js","webpack:///./src/app/util/file/export/ExportManager.js","webpack:///./src/app/util/file/import/TextUploader.js","webpack:///./src/app/util/file/import/Uploader.js","webpack:///./src/app/util/file/import/ImportManager.js","webpack:///./src/app/session/Session.js","webpack:///./src/app/util/URLHelper.js","webpack:///./src/app/session/manager/DrawerManager.js","webpack:///./src/app/session/manager/MenuManager.js","webpack:///./src/app/session/manager/ViewportManager.js","webpack:///./src/app/session/manager/hotkey/HotKeyView.js","webpack:///./src/app/session/manager/undo/UndoManager.js","webpack:///./src/app/session/manager/TooltipManager.js","webpack:///./src/app/util/theme/style/StyleEntry.js","webpack:///./src/app/util/theme/Theme.js","webpack:///./src/app/util/theme/style/SourceStyleEntry.js","webpack:///./src/app/util/theme/ThemeManager.js","webpack:///./src/app/util/broadcast/Broadcast.js","webpack:///./src/app/session/manager/broadcast/RemoteSession.js","webpack:///./src/app/session/manager/broadcast/BroadcastManager.js","webpack:///./src/app/experimental/App.js","webpack:///./src/app/changelog.js","webpack:///./src/app/index.js","webpack:///./src/app/components/iconset/CrossIcon.js","webpack:///./src/app/session/SessionExporter.js","webpack:///./src/app/util/file/export/Exporter.js","webpack:///./src/app/util/MathHelper.js","webpack:///./src/app/session/manager/hotkey/HotKeyManager.js","webpack:///./src/app/session/manager/RenderManager.js","webpack:///./src/app/components/iconset/UploadIcon.js","webpack:///./src/app/session/manager/notification/components/DefaultNotificationLayout.js","webpack:///./src/app/components/iconset/DownloadIcon.js","webpack:///./src/app/publicPath.js","webpack:///./src/app/experimental/components/IconButton.js"],"sourcesContent":["import React from 'react';\nimport Style from './PanelContainer.css';\n\nclass PanelContainer extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const title = this.props.title;\n\n        return (\n            <div id={this.props.id}\n                className={Style.panel_container +\n                    ' ' + this.props.className}\n                style={this.props.style}>\n                <div className={Style.panel_title}>\n                    <h1>{title}</h1>\n                </div>\n                <div className={Style.panel_content}>\n                    {this.props.children}\n                </div>\n                <div className={Style.panel_bottom}>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default PanelContainer;\n","const RGB_WHITE = [255, 255, 255];\nconst RGB_BLACK = [0, 0, 0];\n\nexport function grayscaleRGB(rgb, dst = [])\n{\n    const grayscaleAmount = rgb[0] * 0.3 + rgb[1] * 0.59 + rgb[2] * 0.11;\n    dst[0] = grayscaleAmount;\n    dst[1] = grayscaleAmount;\n    dst[2] = grayscaleAmount;\n    return dst;\n}\n\nexport function blendRGB(percent, rgb1, rgb2 = null, dst = [])\n{\n    const blendAmount = Math.abs(percent);\n    if (!rgb2) rgb2 = percent < 0 ? RGB_BLACK : RGB_WHITE;\n\n    dst[0] = rgb1[0] + Math.round(blendAmount * (rgb2[0] - rgb1[0]));\n    dst[1] = rgb1[1] + Math.round(blendAmount * (rgb2[1] - rgb1[1]));\n    dst[2] = rgb1[2] + Math.round(blendAmount * (rgb2[2] - rgb1[2]));\n    return dst;\n}\n\nexport function invertRGB(rgb, blackwhite = false, dst = [])\n{\n    if (blackwhite)\n    {\n        // http://stackoverflow.com/a/3943023/112731\n        if ((rgb[0] * 0.299 + rgb[1] * 0.587 + rgb[2] * 0.114) > 186)\n        {\n            dst[0] = 0;\n            dst[1] = 0;\n            dst[2] = 0;\n        }\n        else\n        {\n            dst[0] = 0xFF;\n            dst[1] = 0xFF;\n            dst[2] = 0xFF;\n        }\n    }\n    else\n    {\n        dst[0] = (255 - rgb[0]);\n        dst[1] = (255 - rgb[1]);\n        dst[2] = (255 - rgb[2]);\n    }\n    return dst;\n}\n\n/* RGB and HSL conversions: https://gist.github.com/mjackson/5311256 */\nexport function HEXtoRGB(hex, dst = [])\n{\n    if (hex.indexOf('#') === 0) hex = hex.slice(1);\n    if (hex.length === 3) hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n    if (hex.length !== 6) throw new Error('Invalid hex color format');\n    const red = hex.substring(0, 2);\n    const green = hex.substring(2, 4);\n    const blue = hex.substring(4, 6);\n\n    dst[0] = parseInt(red, 16);\n    dst[1] = parseInt(green, 16);\n    dst[2] = parseInt(blue, 16);\n    return dst;\n}\nexport function RGBtoHEX(rgb)\n{\n    return '#' + (rgb[2] | (rgb[1] << 8) | (rgb[0] << 16) | (1 << 24)).toString(16).slice(1);\n}\nexport function RGBtoHSV(rgb, dst = [])\n{\n    let r = rgb[0] / 255;\n    let g = rgb[1] / 255;\n    let b = rgb[2] / 255;\n    const max = Math.max(r, g, b);\n    const min = Math.min(r, g, b);\n    const d = max - min;\n\n    let h = 0;\n    const s = max == 0 ? 0 : d / max;\n    const v = max;\n    if (max == min)\n    {\n        h = 0;\n    }\n    else\n    {\n        switch (max)\n        {\n        case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n        case g: h = (b - r) / d + 2; break;\n        case b: h = (r - g) / d + 4; break;\n        }\n\n        h /= 6;\n    }\n\n    dst[0] = h;\n    dst[1] = s;\n    dst[2] = v;\n    return dst;\n}\nexport function HSVtoRGB(h, s, v, dst = [])\n{\n    let r = 0; let g = 0; let b = 0;\n    const i = Math.floor(h * 6);\n    const f = h * 6 - i;\n    const p = v * (1 - s);\n    const q = v * (1 - f * s);\n    const t = v * (1 - (1 - f) * s);\n    switch (i % 6)\n    {\n    case 0: r = v, g = t, b = p; break;\n    case 1: r = q, g = v, b = p; break;\n    case 2: r = p, g = v, b = t; break;\n    case 3: r = p, g = q, b = v; break;\n    case 4: r = t, g = p, b = v; break;\n    case 5: r = v, g = p, b = q; break;\n    }\n\n    dst[0] = r * 255;\n    dst[1] = g * 255;\n    dst[2] = b * 255;\n    return dst;\n}\n","import {guid} from 'util/MathHelper.js';\n\nclass Notification\n{\n    constructor(notificationManager, message, layoutID, tags, props)\n    {\n        this._notificationManager = notificationManager;\n        this._message = message;\n        this._layoutID = layoutID;\n        this._tags = tags;\n        this._props = props;\n        this._id = guid();\n    }\n\n    close() { this._notificationManager.removeNotification(this); }\n    hasTag(tag) { return this._tags.includes(tag); }\n\n    getMessage() { return this._message; }\n    getLayoutID() { return this._layoutID; }\n    getTags() { return this._tags; }\n    getProps() { return this._props; }\n    getID() { return this._id; }\n    getNotificationManager() { return this._notificationManager; }\n}\n\nexport default Notification;\n","import React from 'react';\n\nimport Style from './DefaultNotificationLayout.css';\n\nclass SequenceNotificationLayout extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const { message, notification, onClick, ...props } = this.props;\n\n        return (\n            <div className={Style.notification_container}\n                {...props}>\n                {message &&\n                    message.split('\\n').map((e, i) => <p key={e + ':' + i}>{e}</p>)}\n                {this.props.children}\n                <button style={{marginBottom: '1em'}} onClick={onClick}>\n                    {I18N.toString('message.action.next')}\n                </button>\n                {notification && <button onClick={e => notification.close()}>\n                    {I18N.toString('message.action.close')}\n                </button>}\n            </div>\n        );\n    }\n}\n\nexport default SequenceNotificationLayout;\n","import React from 'react';\nimport Notification from './Notification.js';\n\nimport DefaultNotificationLayout, {\n    STYLE_TYPE_DEFAULT,\n    STYLE_TYPE_WARNING,\n    STYLE_TYPE_ERROR,\n    STYLE_TYPE_SUCCESS\n} from './components/DefaultNotificationLayout.js';\nimport SequenceNotificationLayout from './components/SequenceNotificationLayout.js';\n\nexport const DEFAULT_LAYOUT_ID = 'default';\nexport const WARNING_LAYOUT_ID = 'warning';\nexport const ERROR_LAYOUT_ID = 'error';\nexport const SUCCESS_LAYOUT_ID = 'success';\nexport const SEQUENCE_LAYOUT_ID = 'sequence';\n\nclass NotificationManager\n{\n    constructor()\n    {\n        this._layouts = new Map();\n        this._notifications = [];\n    }\n\n    registerNotificationLayout(layoutID, notificationLayout)\n    {\n        this._layouts.set(layoutID, notificationLayout);\n        return this;\n    }\n\n    unregisterNotificationLayout(layoutID)\n    {\n        this._layouts.delete(layoutID);\n        return this;\n    }\n\n    pushNotification(message, layoutID = null, tags = [], props = {}, replace = true)\n    {\n        if (replace && tags.length > 0)\n        {\n            this.clearNotifications(tags);\n        }\n\n        const notification = new Notification(this, message, layoutID, tags, props);\n        this._notifications.push(notification);\n        return notification;\n    }\n\n    popNotification(tags = null)\n    {\n        if (this._notifications.length <= 0) return null;\n\n        if (Array.isArray(tags))\n        {\n            for (let i = this._notifications.length - 1; i >= 0; --i)\n            {\n                const notification = this._notifications[i];\n                let flag = true;\n                for (const tag of tags)\n                {\n                    if (!notification.hasTag(tag))\n                    {\n                        flag = false;\n                        break;\n                    }\n                }\n                if (flag)\n                {\n                    this._notifications.splice(i, 1);\n                    return notification;\n                }\n            }\n        }\n        else if (typeof tags === 'string')\n        {\n            for (let i = 0, length = this._notifications.length; i < length; ++i)\n            {\n                const notification = this._notifications[i];\n                if (notification.hasTag(tags))\n                {\n                    this._notifications.splice(i, 1);\n                    return notification;\n                }\n            }\n        }\n        else\n        {\n            return this._notifications.pop();\n        }\n    }\n\n    removeNotification(notification)\n    {\n        const i = this._notifications.indexOf(notification);\n        if (i >= 0)\n        {\n            this._notifications.splice(i, 1);\n        }\n    }\n\n    clearNotifications(tags = null)\n    {\n        if (this._notifications.length <= 0) return;\n\n        if (Array.isArray(tags))\n        {\n            for (let i = this._notifications.length - 1; i >= 0; --i)\n            {\n                const notification = this._notifications[i];\n                let flag = true;\n                for (const tag of tags)\n                {\n                    if (!notification.hasTag(tag))\n                    {\n                        flag = false;\n                        break;\n                    }\n                }\n                if (flag)\n                {\n                    this._notifications.splice(i, 1);\n                }\n            }\n        }\n        else if (typeof tags === 'string')\n        {\n            for (let i = this._notifications.length - 1; i >= 0; --i)\n            {\n                const notification = this._notifications[i];\n                if (notification.hasTag(tags))\n                {\n                    this._notifications.splice(i, 1);\n                }\n            }\n        }\n        else\n        {\n            this._notifications.length = 0;\n        }\n    }\n\n    //DuckType(SessionListener)\n    onSessionStart(session)\n    {\n        //Overwrite any changes to default notifications...\n        this.registerNotificationLayout(DEFAULT_LAYOUT_ID, props => <DefaultNotificationLayout styleType={STYLE_TYPE_DEFAULT} {...props} />);\n        this.registerNotificationLayout(WARNING_LAYOUT_ID, props => <DefaultNotificationLayout styleType={STYLE_TYPE_WARNING} {...props} />);\n        this.registerNotificationLayout(ERROR_LAYOUT_ID, props => <DefaultNotificationLayout styleType={STYLE_TYPE_ERROR} {...props} />);\n        this.registerNotificationLayout(SUCCESS_LAYOUT_ID, props => <DefaultNotificationLayout styleType={STYLE_TYPE_SUCCESS} {...props} />);\n        this.registerNotificationLayout(SEQUENCE_LAYOUT_ID, props => <SequenceNotificationLayout {...props} />);\n    }\n\n    //DuckType(SessionListener)\n    onSessionStop(session)\n    {\n        this.clearNotifications();\n    }\n\n    hasNotificationLayout(layoutID)\n    {\n        return this._layouts.has(layoutID);\n    }\n\n    getNotificationLayout(layoutID)\n    {\n        return this._layouts.get(layoutID);\n    }\n\n    getNotifications()\n    {\n        return this._notifications;\n    }\n\n    isEmpty()\n    {\n        return this._notifications.length <= 0;\n    }\n}\n\nexport default NotificationManager;\n","/* eslint-disable no-console */\n\nclass Logger\n{\n    static out(tag, message)\n    {\n        const result = '[' + tag + '] ' + message;\n        if (console && typeof console['log'] === 'function')\n        {\n            console['log'].call(result);\n        }\n    }\n\n    static error(tag, message, err = null)\n    {\n        Logger.out(tag, (err ? err.message + ' : ' : '') + message);\n    }\n}\n\nexport default Logger;\n","import React from 'react';\n\nclass ExpandDownIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z\"/>\n            </svg>\n        );\n    }\n}\nexport default ExpandDownIcon;\n","import React from 'react';\nimport Style from './DrawerView.css';\n\nimport IconButton from 'experimental/components/IconButton.js';\nimport ExpandDownIcon from 'components/iconset/ExpandDownIcon.js';\n\nconst DRAWER_WIDTH_CSSVAR = '--drawer-width';\nconst DRAWER_HANDLE_DRAG_OFFSET = 6;\nconst DRAWER_HANDLE_MIN_SIZE_BUFFER = 32;\nconst DRAWER_HANDLE_MAX_SIZE_BUFFER = 128;\nconst DRAWER_MIN_WIDTH = 200;\nconst DRAWER_RESIZE_REFRESH_RATE = 200;\nconst DRAWER_HANDLE_CUSTOM_SNAP_WIDTH = 300;\n\nconst DRAWER_SHOULD_HIDE_CONTENT_ON_RESIZE = true;\nconst DRAWER_SHOULD_HIDE_TAB_LIST = false;\n\nexport const DRAWER_WIDTH_TYPE_FULL = 'full';\nexport const DRAWER_WIDTH_TYPE_MIN = 'min';\nexport const DRAWER_SIDE_BOTTOM = 'bottom';\nexport const DRAWER_SIDE_RIGHT = 'right';\nexport const DRAWER_BAR_DIRECTION_VERTICAL = 'vertical';\nexport const DRAWER_BAR_DIRECTION_HORIZONTAL = 'horizontal';\n\n/**\n * A component that renders a collapsible drawer. It also handles the viewport beside\n * the drawer. To update the panels available in the drawer, you can pass an array of\n * component classes through the props.\n * \n * TODO: The drawer should not be responsible for the viewport as well. Separation of concerns.\n */\nclass DrawerView extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.ref = null;\n        this.drawerElement = null;\n\n        this.state = {\n            open: false,\n            tabIndex: 0,\n            soloClass: null,\n            viewportColor: null\n        };\n\n        //When drawer is currently changing size intentfully\n        this._handlingGrab = false;\n        this._handlingResize = false;\n        //Whether the drawer should fullscreen\n        this._isfull = false;\n        //Whether to restore drawer width after fullscreen\n        this._hasintent = false;\n        //Save intentful drawer width for restore after fullscreen\n        this._prevWidth = DRAWER_MIN_WIDTH;\n        //Used to manage resize updates\n        this._resizeTimeout = null;\n        this._resizeEndTimeout = null;\n        //Changed in render() to reflect current render state.\n        this._sideways = false;\n\n        this.onDrawerHandleGrab = this.onDrawerHandleGrab.bind(this);\n        this.onDrawerHandleRelease = this.onDrawerHandleRelease.bind(this);\n        this.onDrawerHandleMove = this.onDrawerHandleMove.bind(this);\n        this.onDrawerExpand = this.onDrawerExpand.bind(this);\n        this.onWindowResize = this.onWindowResize.bind(this);\n    }\n\n    /** @override */\n    componentDidMount()\n    {\n        window.addEventListener('resize', this.onWindowResize, false);\n    }\n\n    /** @override */\n    componentWillUnmount()\n    {\n        window.removeEventListener('resize', this.onWindowResize);\n    }\n\n    openDrawer(fullscreen = false, callback = null)\n    {\n        if (fullscreen)\n        {\n            this.setDrawerWidth(DRAWER_WIDTH_TYPE_FULL, true);\n        }\n\n        if (!this.state.open)\n        {\n            this.setState({ open: true }, callback);\n        }\n    }\n\n    closeDrawer(callback = null)\n    {\n        if (this.state.open)\n        {\n            this.setState({ open: false }, callback);\n        }\n    }\n\n    toggleDrawer(callback = null)\n    {\n        this.setState((prev, props) => \n        {\n            return { open: !prev.open };\n        }, callback);\n    }\n\n    isDrawerOpen()\n    {\n        return this.state.open;\n    }\n\n    isDrawerFullscreen()\n    {\n        return this._isfull;\n    }\n\n    setCurrentTab(tabIndex)\n    {\n        if (!this.props.panels) return;\n        if (tabIndex >= this.props.panels.length) tabIndex = 0;\n        if (this.state.open && this.state.tabIndex === tabIndex)\n        {\n            //Toggle fullscreen\n            if (this._isfull)\n            {\n                this.setDrawerWidth(this._prevWidth);\n            }\n            else\n            {\n                this.setDrawerWidth(DRAWER_WIDTH_TYPE_FULL, true);\n            }\n        }\n        else\n        {\n            //Open and set tab index\n            this.setState({ open: true, tabIndex: tabIndex });\n        }\n    }\n\n    getCurrentTabIndex()\n    {\n        return this.state.tabIndex;\n    }\n\n    isCurrentTab(tabIndex)\n    {\n        return this.state.tabIndex === tabIndex;\n    }\n\n    /** Sets the viewport boundary color */\n    setViewportColor(color)\n    {\n        this.setState({ viewportColor: color });\n    }\n    \n    /** Gets the viewport boundary color */\n    getViewportColor()\n    {\n        return this.state.viewportColor;\n    }\n\n    setDrawerSoloClass(soloClass, callback = null)\n    {\n        this.setState({ soloClass: soloClass }, callback);\n    }\n\n    setDrawerWidth(value, hasIntent = true)\n    {\n        if (!this.drawerElement || !this.ref) return;\n\n        this._hasintent = hasIntent;\n\n        const drawerSide = this.props.side;\n        const drawerOffsetY = this.ref.getBoundingClientRect().top;\n        const isDrawerSideBottom = drawerSide === DRAWER_SIDE_BOTTOM;\n        const documentSize = isDrawerSideBottom ?\n            document.documentElement.clientHeight - drawerOffsetY :\n            document.documentElement.clientWidth;\n        const minSize = DRAWER_MIN_WIDTH;\n\n        if (typeof value === 'string')\n        {\n            switch (value)\n            {\n            case DRAWER_WIDTH_TYPE_FULL:\n                this._isfull = true;\n                this._prevWidth = getCSSDrawerWidth(this.drawerElement);\n                break;\n            case DRAWER_WIDTH_TYPE_MIN:\n                this._isfull = false;\n                this.drawerElement.style.setProperty(DRAWER_WIDTH_CSSVAR, minSize + 'px');\n                break;\n            default:\n                throw new Error('Trying to set drawer width to invalid string');\n            }\n        }\n        else if (typeof value === 'number')\n        {\n            if (value < minSize + DRAWER_HANDLE_MIN_SIZE_BUFFER) value = minSize;\n            if (value > documentSize - DRAWER_HANDLE_MAX_SIZE_BUFFER)\n            {\n                value = documentSize;\n                this._isfull = true;\n            }\n            else\n            {\n                this._isfull = false;\n            }\n            this.drawerElement.style.setProperty(DRAWER_WIDTH_CSSVAR, value + 'px');\n        }\n        else\n        {\n            throw new Error('Trying to set drawer width to unknown value');\n        }\n    }\n\n    onDrawerExpand()\n    {\n        //Don't close, just small-ify.\n        if (this.state.open && this._isfull)\n        {\n            this.setDrawerWidth(this._prevWidth);\n\n            //If did not make any changes...\n            if (this._isfull)\n            {\n                //Make it do normal stuff.\n                this.toggleDrawer();\n            }\n        }\n        else\n        {\n            this.toggleDrawer();\n        }\n    }\n\n    onWindowResize(e)\n    {\n        if (!this._resizeTimeout)\n        {\n            this._resizeTimeout = setTimeout(() => \n            {\n                this._resizeTimeout = null;\n\n                //Handle resize ends (more like debouncing)\n                if (this._resizeEndTimeout) clearTimeout(this._resizeEndTimeout);\n                else this._handlingResize = true;\n                this._resizeEndTimeout = setTimeout(() => \n                {\n                    this._resizeEndTimeout = null;\n                    this._handlingResize = false;\n                }, 500);\n\n                if (!this.drawerElement || !this.ref) return;\n\n                const drawerSide = this.props.side;\n                const drawerOffsetY = this.ref.getBoundingClientRect().top;\n                const isDrawerSideBottom = drawerSide === DRAWER_SIDE_BOTTOM;\n                const documentSize = isDrawerSideBottom ?\n                    document.documentElement.clientHeight - drawerOffsetY :\n                    document.documentElement.clientWidth;\n\n                if (this._isfull)\n                {\n                    if (this._hasintent) return;\n                    if (this._prevWidth + DRAWER_HANDLE_MAX_SIZE_BUFFER < documentSize)\n                    {\n                        this._isfull = false;\n                        this.drawerElement.style.setProperty(DRAWER_WIDTH_CSSVAR, this._prevWidth + 'px');\n                    }\n                }\n                else\n                {\n                    const drawerSize = getCSSDrawerWidth(this.drawerElement);\n                    if (drawerSize + DRAWER_HANDLE_MAX_SIZE_BUFFER > documentSize)\n                    {\n                        this._isfull = true;\n                        this._hasintent = false;\n                    }\n                }\n            }, DRAWER_RESIZE_REFRESH_RATE);\n        }\n    }\n\n    onDrawerHandleGrab(e)\n    {\n        if (!this._handlingGrab && this.state.open)\n        {\n            this._handlingGrab = true;\n            this._prevWidth = getCSSDrawerWidth(this.drawerElement);\n            document.addEventListener('mouseup', this.onDrawerHandleRelease);\n            document.addEventListener('mousemove', this.onDrawerHandleMove);\n        }\n        else\n        {\n            this.onDrawerHandleRelease(e);\n        }\n    }\n\n    onDrawerHandleRelease(e)\n    {\n        if (this._handlingGrab)\n        {\n            document.removeEventListener('mouseup', this.onDrawerHandleRelease);\n            document.removeEventListener('mousemove', this.onDrawerHandleMove);\n            this._handlingGrab = false;\n            this._prevWidth = getCSSDrawerWidth(this.drawerElement);\n        }\n    }\n\n    onDrawerHandleMove(e)\n    {\n        const drawerSide = this.props.side;\n        const isDrawerSideBottom = drawerSide === DRAWER_SIDE_BOTTOM;\n        const documentSize = isDrawerSideBottom ?\n            document.documentElement.clientHeight :\n            document.documentElement.clientWidth;\n        const pointerValue = isDrawerSideBottom ? e.clientY : e.clientX;\n\n        let result = documentSize - pointerValue + DRAWER_HANDLE_DRAG_OFFSET;\n        //Try snapping to some widths...\n        if (!isDrawerSideBottom && Math.abs(result - DRAWER_HANDLE_CUSTOM_SNAP_WIDTH) < DRAWER_HANDLE_MIN_SIZE_BUFFER)\n        {\n            result = DRAWER_HANDLE_CUSTOM_SNAP_WIDTH;\n        }\n        this.setDrawerWidth(result);\n    }\n\n    /** @override */\n    render()\n    {\n        const drawerPanels = this.props.panels;\n        const drawerSide = this.props.side || DRAWER_SIDE_RIGHT;\n        const drawerDirection = this.props.direction || DRAWER_BAR_DIRECTION_HORIZONTAL;\n        const shouldDrawerHide = this.props.hide || false;\n        const drawerSoloClass = this.state.soloClass;\n\n        const isDrawerOpen = this.state.open;\n        //Assumes that parent container has flex and flex-direction: column for bottom, row for right.\n        const isDrawerSideBottom = drawerSide === DRAWER_SIDE_BOTTOM;\n        const shouldDrawerBarSideways = !isDrawerSideBottom && (!isDrawerOpen || drawerDirection === DRAWER_BAR_DIRECTION_VERTICAL);\n        const showDrawerHandle = isDrawerOpen || this._handlingGrab;\n        const shouldDrawerOpenFull = this._isfull;\n        const shouldHideDrawerContent = (DRAWER_SHOULD_HIDE_CONTENT_ON_RESIZE && (this._handlingGrab || this._handlingResize)) || !isDrawerOpen;\n        const showDrawerTabs = isDrawerOpen || !DRAWER_SHOULD_HIDE_TAB_LIST;\n\n        //Used to handle sideways logic\n        this._sideways = shouldDrawerBarSideways;\n\n        let viewportStyle = {};\n        if (this.state.viewportColor !== null)\n        {\n            viewportStyle['outlineColor'] = this.state.viewportColor;\n        }\n\n        return (\n            <div ref={ref => this.ref = ref}\n                id={this.props.id}\n                className={Style.app_content +\n                    (isDrawerSideBottom ? ' column ' : '') +\n                    (' ' + this.props.className)}\n                style={this.props.style}>\n                <div className={Style.app_viewport} style={viewportStyle}>\n                    {this.props.children}\n                </div>\n                <div ref={ref => this.drawerElement = ref}\n                    className={\n                        Style.app_drawer +\n                        (isDrawerOpen ? ' open ' : '') +\n                        (shouldDrawerBarSideways ? ' drawer-bar-sideways ' : '') +\n                        (isDrawerSideBottom ? ' drawer-side-bottom ' : '') +\n                        (shouldDrawerOpenFull ? ' full ' : '') +\n                        (shouldHideDrawerContent ? ' hide-content ' : '') +\n                        (this._handlingResize ? ' no-animation ' : '') +\n                        (shouldDrawerHide ? ' hide ' : '')}>\n                    <div className={Style.drawer_handle + (showDrawerHandle ? ' show ' : '')} onMouseDown={this.onDrawerHandleGrab}>\n                        <span>{'||'}</span>\n                    </div>\n                    <div className={Style.drawer_content}>\n                        <nav className={Style.drawer_content_bar}>\n                            <IconButton className={Style.drawer_tab_expander} onClick={this.onDrawerExpand}>\n                                <ExpandDownIcon />\n                            </IconButton>\n                            {showDrawerTabs && drawerPanels && drawerPanels.map((e, i) => \n                            {\n                                if (!e) return null;\n                                if (!e['TITLE']) return null;\n                                const title = e['TITLE'];\n                                const current = this.isCurrentTab(i);\n                                const disabled = drawerSoloClass && drawerSoloClass !== e;\n                                return (\n                                    <a key={title + ':' + i}\n                                        className={Style.drawer_tab +\n                                            (current ? ' active ' : '') +\n                                            (disabled ? ' disabled ' : '')}\n                                        onClick={() => this.setCurrentTab(i)}>\n                                        <label>{title}</label>\n                                    </a>\n                                );\n                            })}\n                        </nav>\n                        <div className={Style.drawer_content_panel_container}>\n                            <div className={Style.drawer_content_panel}>\n                                {drawerPanels && drawerPanels.map((e, i) => \n                                {\n                                    if (!e) return null;\n                                    const ComponentClass = e;\n                                    const title = e['TITLE'] || '';\n                                    const current = this.isCurrentTab(i);\n                                    const disabled = drawerSoloClass && drawerSoloClass !== e;\n                                    return (\n                                        <div key={title + ':' + i}\n                                            className={Style.drawer_panel_container +\n                                                (!current ? ' hide ' : '') +\n                                                (disabled ? ' disabled ' : '')}>\n                                            <ComponentClass className={Style.drawer_panel}\n                                                {...this.props.panelProps}\n                                                drawer={this} />\n                                        </div>\n                                    );\n                                })}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\nexport default DrawerView;\n\nfunction getCSSDrawerWidth(drawerElement)\n{\n    return parseInt(window.getComputedStyle(drawerElement).getPropertyValue(DRAWER_WIDTH_CSSVAR).replace(/\\D/g, ''));\n}\n","import React from 'react';\n\nclass UndoIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z\"/>\n            </svg>\n        );\n    }\n}\nexport default UndoIcon;\n","import React from 'react';\n\nclass RedoIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z\"/>\n            </svg>\n        );\n    }\n}\nexport default RedoIcon;\n","import React from 'react';\nimport Style from './TaskViewButtonBar.css';\n\nimport UndoIcon from 'components/iconset/UndoIcon.js';\nimport RedoIcon from 'components/iconset/RedoIcon.js';\nimport DownloadIcon from 'components/iconset/DownloadIcon.js';\nimport CrossIcon from 'components/iconset/CrossIcon.js';\n\nconst DEFAULT_MENU_INDEX = -1;\n\nclass TaskViewButtonBar extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.state = {\n            open: false,\n            menuIndex: DEFAULT_MENU_INDEX\n        };\n    }\n\n    openBar(callback = null)\n    {\n        if (!this.state.open)\n        {\n            this.setState({ open: true, menuIndex: DEFAULT_MENU_INDEX }, callback);\n        }\n    }\n\n    closeBar(callback = null)\n    {\n        if (this.state.open || this.state.menuIndex !== DEFAULT_MENU_INDEX)\n        {\n            this.setState({ open: false, menuIndex: DEFAULT_MENU_INDEX }, callback);\n        }\n    }\n\n    toggleBar(callback = null)\n    {\n        this.setState((prev) =>\n        {\n            return { open: !prev.open };\n        }, callback);\n    }\n\n    isBarOpen()\n    {\n        return this.state.open;\n    }\n\n    setCurrentMenu(menuIndex)\n    {\n        if (!this.props.menus) return;\n        if (menuIndex >= this.props.menus.length) menuIndex = DEFAULT_MENU_INDEX;\n\n        const shouldOpen = menuIndex !== DEFAULT_MENU_INDEX;\n        this.setState({ open: shouldOpen, menuIndex: menuIndex });\n    }\n\n    getCurrentMenuIndex()\n    {\n        return this.state.menuIndex;\n    }\n\n    isCurrentMenu(menuIndex)\n    {\n        return this.state.menuIndex === menuIndex;\n    }\n\n    renderButton({ label, title, icon: IconClass, onClick, disabled })\n    {\n        return (\n            <button\n                type=\"button\"\n                className={Style.button}\n                title={title || label}\n                onClick={onClick}\n                disabled={disabled}>\n                {IconClass && (\n                    <span className={Style.icon}>\n                        <IconClass />\n                    </span>\n                )}\n                <span>{label}</span>\n            </button>\n        );\n    }\n\n    render()\n    {\n        const {\n            className,\n            style,\n            hide,\n            menus,\n            menuProps,\n            saveStatus,\n            submitEnabled,\n            canUndo,\n            canRedo,\n            canExport,\n            canReset,\n            onUndo,\n            onRedo,\n            onReset,\n            onExport,\n            onHome,\n        } = this.props;\n\n        const isBarOpen = this.state.open;\n        const menuIndex = this.state.menuIndex;\n        const safeMenuProps = menuProps || {};\n        const ToolbarMenu = menus && menuIndex >= 0 ? menus[menuIndex] : null;\n        const statusMap = {\n            ready: { className: 'fas fa-circle text-muted', title: 'Bereit zum Speichern' },\n            unsaved: { className: 'fas fa-circle text-warning', title: 'Ungespeichert' },\n            saving: { className: 'fas fa-circle text-warning', title: 'Speichert...' },\n            saved: { className: 'fas fa-circle text-success', title: 'Gespeichert' },\n            error: { className: 'fas fa-circle text-danger', title: 'Fehler beim Speichern' },\n            submitted: { className: 'fas fa-circle text-primary', title: 'Abgegeben' }\n        };\n        const status = statusMap[saveStatus] || statusMap.ready;\n        const showControls = true;\n\n        return (\n            <div\n                className={\n                    Style.taskview_bar +\n                    (isBarOpen ? ' open ' : '') +\n                    (hide ? ' hide ' : '') +\n                    ' ' + className\n                }\n                style={style}>\n                <div className={Style.button_bar}>\n                    {this.renderButton({\n                        label: I18N.toString('action.toolbar.undo'),\n                        title: I18N.toString('action.toolbar.undo'),\n                        icon: UndoIcon,\n                        onClick: onUndo,\n                        disabled: !canUndo\n                    })}\n                    {this.renderButton({\n                        label: I18N.toString('action.toolbar.redo'),\n                        title: I18N.toString('action.toolbar.redo'),\n                        icon: RedoIcon,\n                        onClick: onRedo,\n                        disabled: !canRedo\n                    })}\n                    {canReset && this.renderButton({\n                        label: I18N.toString('action.toolbar.reset'),\n                        title: I18N.toString('action.toolbar.reset'),\n                        icon: CrossIcon,\n                        onClick: onReset,\n                        disabled: !canReset\n                    })}\n                    {this.renderButton({\n                        label: I18N.toString('component.exporting.title'),\n                        title: I18N.toString('component.exporting.title'),\n                        icon: DownloadIcon,\n                        onClick: onExport,\n                        disabled: !canExport\n                    })}\n\n                    {showControls && (\n                    <div className={Style.controls}>\n                        <span\n                            id=\"save-status\"\n                            className={`${status.className} ${Style.status_icon}`}\n                            title={status.title}\n                        />\n                        <button\n                            id=\"saveButton\"\n                            className=\"btn btn-success btn-sm\"\n                            onClick={() => this.props.onSave(false)}\n                            type=\"button\">\n                            <i className=\"fas fa-save\" /> Speichern\n                        </button>\n                        <button\n                            id=\"submitButton\"\n                            className=\"btn btn-primary btn-sm\"\n                            onClick={() => this.props.onSubmit()}\n                            type=\"button\"\n                            disabled={!submitEnabled}>\n                            <i className=\"fas fa-paper-plane\" /> Abgeben\n                        </button>\n                        <button\n                            id=\"homeButton\"\n                            className=\"btn btn-secondary btn-sm\"\n                            onClick={() => onHome && onHome()}\n                            type=\"button\"\n                            title=\"Dashboard\"\n                            aria-label=\"Dashboard\"\n                            disabled={!onHome}>\n                            <i className=\"fas fa-home\" />\n                        </button>\n                        {isBarOpen && ToolbarMenu && this.renderButton({\n                            label: 'Close Menu',\n                            title: 'Close Menu',\n                            icon: CrossIcon,\n                            onClick: () => this.closeBar()\n                        })}\n                    </div>\n                    )}\n                </div>\n\n                {isBarOpen && ToolbarMenu && (\n                    <div className={Style.menu_container}>\n                        <ToolbarMenu {...safeMenuProps} toolbar={this} />\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n\nexport default TaskViewButtonBar;\n","import React from 'react';\nimport Style from './TooltipView.css';\n\nconst TOOLTIP_WAIT_TIME = 30000;\n\nexport const RANDOM_MODE = 'random';\nexport const SEQUENTIAL_MODE = 'sequential';\nexport const ONESHOT_MODE = 'oneshot';\n\nclass TooltipView extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this._tooltipTimeout = null;\n\n        this.state = {\n            index: props.initial || 0\n        };\n    }\n\n    /** @override */\n    componentWillUnmount()\n    {\n        clearTimeout(this._tooltipTimeout);\n        this._tooltipTimeout = null;\n    }\n\n    setTooltipIndex(index)\n    {\n        this.setState({ index: index });\n    }\n\n    getTooltipIndex()\n    {\n        return this.state.index;\n    }\n\n    updateTooltip()\n    {\n        const mode = this.props.mode;\n        const visible = this.props.visible;\n        this._tooltipTimeout = null;\n\n        if (visible)\n        {\n            const count = React.Children.count(this.props.children);\n            let nextIndex = this.state.index + 1;\n            if (mode === RANDOM_MODE)\n            {\n                nextIndex = Math.floor(Math.random() * count);\n            }\n            else if (mode === ONESHOT_MODE)\n            {\n                if (nextIndex >= count) nextIndex = count - 1;\n            }\n            else\n            {\n                if (nextIndex >= count) nextIndex = 0;\n            }\n            this.setTooltipIndex(nextIndex);\n        }\n        else\n        {\n            if (mode === RANDOM_MODE)\n            {\n                //Pick a random index to start at.\n                this.setTooltipIndex(Math.floor(Math.random() * React.Children.count(this.props.children)));\n            }\n            else if (mode === ONESHOT_MODE)\n            {\n                //Skip to the end.\n                this.setTooltipIndex(React.Children.count(this.props.children) - 1);\n            }\n            else\n            {\n                //Go back to the beginning.\n                this.setTooltipIndex(0);\n            }\n        }\n    }\n\n    /** @override */\n    render()\n    {\n        //const mode = this.props.mode;\n        const visible = this.props.visible;\n        const tooltipIndex = this.state.index;\n\n        if (visible && !this._tooltipTimeout)\n        {\n            this._tooltipTimeout = setTimeout(() => \n            {\n                this.updateTooltip();\n            }, TOOLTIP_WAIT_TIME);\n        }\n\n        return (\n            <div id={this.props.id}\n                className={Style.tooltip_container +\n                    (visible ? ' visible ' : '') +\n                    ' ' + this.props.className}\n                style={this.props.style}>\n                {React.Children.map(this.props.children, (child, i) => \n                {\n                    return (\n                        <label style={{ opacity: tooltipIndex === i ? 1 : 0 }}>\n                            {child}\n                        </label>\n                    );\n                })}\n            </div>\n        );\n    }\n}\n\nexport default TooltipView;\n","import React from 'react';\nimport Style from './UploadDropZone.css';\n\nimport UploadIcon from 'components/iconset/UploadIcon.js';\n\nclass UploadDropZone extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.ref = null;\n\n        this._waiting = false;\n\n        this.onDragEnter = this.onDragEnter.bind(this);\n        this.onDragLeave = this.onDragLeave.bind(this);\n        this.onFileDrop = this.onFileDrop.bind(this);\n    }\n\n    /** @override */\n    componentDidMount()\n    {\n    //Upload drop zone\n        this.ref.addEventListener('drop', this.onFileDrop);\n        this.ref.addEventListener('dragover', this.onDragEnter);\n        this.ref.addEventListener('dragenter', this.onDragEnter);\n        this.ref.addEventListener('dragleave', this.onDragLeave);\n        this.ref.addEventListener('dragend', this.onDragLeave);\n    }\n\n    /** @override */\n    componentWillUnmount()\n    {\n        this.ref.removeEventListener('drop', this.onFileDrop);\n        this.ref.removeEventListener('dragover', this.onDragEnter);\n        this.ref.removeEventListener('dragenter', this.onDragEnter);\n        this.ref.removeEventListener('dragleave', this.onDragLeave);\n        this.ref.removeEventListener('dragend', this.onDragLeave);\n    }\n\n    onDragEnter(e)\n    {\n        e.preventDefault();\n        e.stopPropagation();\n\n        //Change state\n        this._waiting = true;\n    }\n\n    onDragLeave(e)\n    {\n    //Prevent file from being opened\n        e.preventDefault();\n        e.stopPropagation();\n\n        //Revert state\n        this._waiting = false;\n    }\n\n    onFileDrop(e)\n    {\n    //Prevent file from being opened\n        e.preventDefault();\n        e.stopPropagation();\n\n        //Revert state\n        this._waiting = false;\n\n        const dataTransfer = e.dataTransfer;\n        let fileBlob = null;\n        if (dataTransfer.items)\n        {\n            const dataItems = dataTransfer.items;\n            const length = dataItems.length;\n\n            //Just get the first one\n            if (length >= 1)\n            {\n                const file = dataItems[0];\n                if (file.kind === 'file')\n                {\n                    fileBlob = file.getAsFile();\n                }\n            }\n        }\n        else\n        {\n            const dataFiles = dataTransfer.files;\n            const length = dataFiles.length;\n\n            //Just get the first one\n            if (length >= 1)\n            {\n                fileBlob = dataFiles[0];\n            }\n        }\n\n        if (this.props.onFileDrop)\n        {\n            //NOTE: fileBlob could be null\n            this.props.onFileDrop(fileBlob);\n        }\n\n        if (dataTransfer.items)\n        {\n            dataTransfer.items.clear();\n        }\n        else\n        {\n            dataTransfer.clearData();\n        }\n    }\n\n    /** @override */\n    render()\n    {\n        const isWaitingForFile = this._waiting;\n\n        return (\n            <div ref={ref=>this.ref=ref} id={this.props.id}\n                className={Style.upload_container +\n          (isWaitingForFile ? ' waiting ' : '') +\n          ' ' + this.props.className}\n                style={this.props.style}>\n                <UploadIcon className={Style.upload_icon}/>\n                {React.Children.only(this.props.children)}\n            </div>\n        );\n    }\n}\n\nexport default UploadDropZone;\n","import React from 'react';\nimport Style from './NotificationView.css';\n\nimport DefaultNotificationLayout from './DefaultNotificationLayout.js';\n\nclass NotificationView extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const notificationManager = this.props.notificationManager;\n        return (\n            <div id={this.props.id}\n                className={Style.notifications_container +\n                    ' ' + this.props.className}\n                style={this.props.style}>\n                {notificationManager.getNotifications().map(notification => \n                {\n                    const layoutID = notification.getLayoutID();\n                    const NotificationLayout = layoutID ? notificationManager.getNotificationLayout(layoutID) : DefaultNotificationLayout;\n                    return (\n                        <NotificationLayout key={notification.getID()} notification={notification} message={notification.getMessage()} {...notification.getProps()} />\n                    );\n                })}\n            </div>\n        );\n    }\n}\n\nexport default NotificationView;\n","import React from 'react';\nimport IconButton from './IconButton.js';\n\nclass IconStateButton extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.state = {\n            index: props.initial || 0\n        };\n\n        this.onClick = this.onClick.bind(this);\n    }\n\n    onClick(e)\n    {\n        const prevIndex = this.state.index;\n        this.setState((prev, props) => \n        {\n            const count = React.Children.count(props.children);\n            let nextIndex = prev.index + 1;\n            if (nextIndex >= count)\n            {\n                nextIndex = 0;\n            }\n            return {index: nextIndex};\n        }, () => \n        {\n            if (this.props.onClick)\n            {\n                this.props.onClick(e, prevIndex);\n            }\n        });\n    }\n\n    setStateIndex(index)\n    {\n        this.setState({index: index});\n    }\n\n    getStateIndex()\n    {\n        return this.state.index;\n    }\n\n    /** @override */\n    render()\n    {\n        const child = React.Children.map(this.props.children, (child, i) => \n        {\n            if (i === this.state.index) return child;\n        })[0];\n\n        return (\n            <IconButton id={this.props.id}\n                className={this.props.className}\n                style={this.props.style}\n                title={this.props.title}\n                disabled={this.props.disabled}\n                onClick={this.onClick}>\n                {child}\n            </IconButton>\n        );\n    }\n}\nexport default IconStateButton;\n","import React from 'react';\n\nclass FullscreenIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"/>\n            </svg>\n        );\n    }\n}\nexport default FullscreenIcon;\n","import React from 'react';\n\nclass FullscreenExitIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\"/>\n            </svg>\n        );\n    }\n}\nexport default FullscreenExitIcon;\n","import React from 'react';\nimport Style from './FullscreenWidget.css';\n\nimport IconStateButton from 'experimental/components/IconStateButton.js';\nimport FullscreenIcon from 'components/iconset/FullscreenIcon.js';\nimport FullscreenExitIcon from 'components/iconset/FullscreenExitIcon.js';\n\nclass FullscreenWidget extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const app = this.props.app;\n\n        return (\n            <IconStateButton id={this.props.id}\n                className={Style.fullscreen_button + ' ' + this.props.className}\n                style={this.props.style}\n                title={'Fullscreen Mode'}\n                onClick={(e, i) => app.setState({hide: (i === 0)})}>\n                <FullscreenIcon/>\n                <FullscreenExitIcon/>\n            </IconStateButton>\n        );\n    }\n}\n\nexport default FullscreenWidget;\n","import React from 'react';\nimport Style from '../MenuPanel.css';\n\nimport SessionExporter from 'session/SessionExporter.js';\nimport IconButton from 'experimental/components/IconButton.js';\n\nclass ExportPanel extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    renderExporterButton(exportType)\n    {\n        const exporter = this.props.session.getApp().getExportManager().getExporterByExportType(exportType);\n        if (!(exporter instanceof SessionExporter)) return <span></span>;\n\n        const IconClass = exporter.getIconClass();\n\n        return (\n            <IconButton key={exporter.getLabel() + ':' + exportType}\n                className={Style.panel_button}\n                title={exporter.getLabel()}\n                onClick={() => this.props.session.getApp().getExportManager().tryExportFile(exportType, this.props.session)}>\n                {IconClass && <IconClass/>}\n            </IconButton>\n        );\n    }\n\n    /** @override */\n    render()\n    {\n        const session = this.props.session;\n        const exportManager = session.getApp().getExportManager();\n        const exportTypes = exportManager.getExportTypes();\n\n        return (\n            <div id={this.props.id}\n                className={Style.panel_container +\n          ' ' + this.props.className}\n                style={this.props.style}>\n                <div className={Style.panel_title}>\n                    <h1>{I18N.toString('component.exporting.title')}</h1>\n                </div>\n                <div className={Style.panel_content}>\n                    {exportTypes.map(e => this.renderExporterButton(e))}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default ExportPanel;\n","import React from 'react';\nimport Style from './LanguagePanel.css';\n\nimport PanelContainer from 'experimental/panels/PanelContainer.js';\nimport IconButton from 'experimental/components/IconButton.js';\n\nclass LanguagePanel extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    renderLanguageButton(localizedName, langFile)\n    {\n        return (\n            <IconButton key={langFile}\n                className={Style.language_button}\n                title={localizedName}\n                onClick={(e) => I18N.fetchLanguageFile(langFile)}>\n            </IconButton>\n        );\n    }\n\n    /** @override */\n    render()\n    {\n        //const session = this.props.session;\n\n        return (\n            <PanelContainer id={this.props.id}\n                className={this.props.className}\n                style={this.props.style}\n                title={I18N.toString('component.language.title')}>\n                <div className={Style.language_button_list}>\n                    {this.renderLanguageButton('English', 'en_us')}\n                    {this.renderLanguageButton('Deutsch', 'de_de')}\n                    {this.renderLanguageButton('Pirate Speak', 'xx_pirate')}\n                </div>\n            </PanelContainer>\n        );\n    }\n}\n\nexport default LanguagePanel;\n","const Modules = {};\n\nModules['fsa'] = {\n    name: 'Finite Automata',\n    version: '3.0.0',\n    experimental: true,\n    fetch: function (callback) { import(/* webpackChunkName: \"module_fsa\" */ 'modules/fsa2/FSAModule.js').then(({ default: _ }) => callback(_)); }\n};\n\nModules['pda'] = {\n    name: 'Pushdown Automata',\n    version: '1.0.0',\n    experimental: true,\n    fetch: function (callback) { import(/* webpackChunkName: \"module_pda\" */ 'modules/pda/PDAModule.js').then(({ default: _ }) => callback(_)); }\n};\n\nModules['tm'] = {\n    name: 'Turing Machine',\n    version: '1.0.0',\n    disabled: true,\n    fetch: function (callback) { throw new Error('Module not yet implemented. Sorry :('); }\n};\n\nModules['node'] = {\n    name: 'Node Graph',\n    version: '1.0.0',\n    experimental: true,\n    fetch: function (callback) { import(/* webpackChunkName: \"module_nodegraph\" */ 'modules/nodegraph/NodeGraphModule.js').then(({ default: _ }) => callback(_)); }\n};\n\nModules['tree'] = {\n    name: 'Tree',\n    version: '1.0.0',\n    disabled: true,\n    fetch: function (callback) { throw new Error('Module not yet implemented. Sorry :('); }\n};\n\nModules['hlsm'] = {\n    name: 'High Level State Machine',\n    version: '1.0.0',\n    disabled: true,\n    fetch: function (callback) { throw new Error('Module not yet implemented. Sorry :('); }\n};\n\nModules['mealy'] = {\n    name: 'Mealy Machine',\n    version: '1.0.0',\n    disabled: true,\n    fetch: function (callback) { throw new Error('Module not yet implemented. Sorry :('); }\n};\n\nModules['moore'] = {\n    name: 'Moore Machine',\n    version: '1.0.0',\n    disabled: true,\n    fetch: function (callback) { throw new Error('Module not yet implemented. Sorry :('); }\n};\n\nexport default Modules;\n","import React from 'react';\nimport Style from './ModuleLoaderPanel.css';\n\nimport PanelContainer from 'experimental/panels/PanelContainer.js';\nimport IconButton from 'experimental/components/IconButton.js';\n\nimport Modules from 'modules/Modules.js';\n\nclass ModuleLoaderPanel extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    renderModuleButton(moduleKey, moduleInfo)\n    {\n        const session = this.props.session;\n        const app = session.getApp();\n        const useExperimental = app.isExperimental();\n\n        return (\n            <IconButton key={moduleKey}\n                className={Style.module_button}\n                title={moduleInfo.name + ' (' + moduleInfo.version + ')'}\n                disabled={moduleInfo['experimental'] !== useExperimental || moduleInfo['disabled']}\n                onClick={(e) => \n                {\n                    session.restartSession(session.getApp(), moduleKey);\n                }}>\n            </IconButton>\n        );\n    }\n\n    /** @override */\n    render()\n    {\n        //const session = this.props.session;\n\n        return (\n            <PanelContainer\n                id={this.props.id}\n                className={this.props.className}\n                style={this.props.style}\n                title={'Change Modules'}>\n                <div className={Style.module_button_list}>\n                    {Object.keys(Modules).map(e => this.renderModuleButton(e, Modules[e]))}\n                </div>\n            </PanelContainer>\n        );\n    }\n}\n\nexport default ModuleLoaderPanel;\n","import * as ColorHelper from './ColorHelper.js';\n\nexport function dark(hex)\n{\n    //v < 0.15 ? lighten : darken\n    const color = [];\n    const inverted = [];\n    ColorHelper.HEXtoRGB(hex, color);\n    ColorHelper.invertRGB(color, true, inverted);\n    ColorHelper.blendRGB(0.2, color, inverted, color);\n    const result = ColorHelper.RGBtoHEX(color);\n    return result;\n}\n\nexport function invert(hex)\n{\n    const color = [];\n    ColorHelper.HEXtoRGB(hex, color);\n    ColorHelper.invertRGB(color, false, color);\n    const result = ColorHelper.RGBtoHEX(color);\n    return result;\n}\n\nexport function lite(hex)\n{\n    //v < 0.15 ? lighten : darken\n    const color = [];\n    const inverted = [];\n    ColorHelper.HEXtoRGB(hex, color);\n    ColorHelper.invertRGB(color, true, inverted);\n    ColorHelper.blendRGB(0.39, color, inverted, color);\n    const result = ColorHelper.RGBtoHEX(color);\n    return result;\n}\n","export function downloadURL(filename, url)\n{\n    const element = document.createElement('a');\n    const headerIndex = url.indexOf(';');\n    url = url.substring(0, headerIndex + 1) + 'headers=Content-Disposition%3A%20attachment%3B%20filename=' + filename + ';' + url.substring(headerIndex + 1);\n    element.setAttribute('href', url);\n    element.setAttribute('download', filename);\n\n    element.style.display = 'none';\n    document.body.appendChild(element);\n\n    element.click();\n    document.body.removeChild(element);\n    \n    return Promise.resolve(url);\n}\n\nclass Downloader\n{\n    constructor() {}\n\n    downloadFile(fileName, downloadType, fileData, opts)\n    {\n        return Promise.resolve(fileData);\n    }\n}\n\nexport default Downloader;","import Downloader, { downloadURL } from './Downloader.js';\n\nfunction getTextDataURI(data)\n{\n    return 'data:text/plain; charset=utf-8,' + encodeURIComponent(data);\n}\n\nclass TextDownloader extends Downloader\n{\n    constructor() { super(); }\n\n    /** @override */\n    downloadFile(fileName, downloadType, fileData, opts)\n    {\n        return downloadURL(fileName, getTextDataURI(fileData)).then(result => fileData);\n    }\n}\n\nexport default TextDownloader;","/**\n * Contains utility functions for file-related actions.\n * @module FileHelper\n */\n\n/**\n * Gets the file extension of the name.\n * \n * @param {String} name the file name to parse\n * @returns {String} the file extension for the name or empty string if none found\n */\nexport function getFileExtFromName(name)\n{\n    if (!name) return '';\n    const index = name.lastIndexOf('.');\n    if (index < 0) return '';\n    return name.substring(index);\n}","import { getFileExtFromName } from '../FileHelper.js';\nimport Downloader, { downloadURL } from './Downloader.js';\n\nfunction getBlobFromSVG(svg)\n{\n    const serializer = new XMLSerializer();\n    const svgString = serializer.serializeToString(svg);\n    const blob = new Blob([svgString], { type: 'image/svg+xml' });\n    return blob;\n}\n\nclass SVGImageDownloader extends Downloader\n{\n    constructor() { super(); }\n\n    /** @override */\n    downloadFile(fileName, downloadType, fileData, opts)\n    {\n        if (fileData instanceof SVGElement)\n        {\n            const width = opts['width'] || 1;\n            const height = opts['height'] || 1;\n            const fileExt = getFileExtFromName(fileName);\n            const imageType = opts['image-type'] || fileExt.substring(1);\n            const blob = getBlobFromSVG(fileData);\n            return new Promise((resolve, reject) =>\n            {\n                const url = URL.createObjectURL(blob);\n\n                const canvas = document.createElement('canvas');\n                const ctx = canvas.getContext('2d');\n            const pixelRatio = (window.devicePixelRatio || 1) * 2;\n                canvas.width = width * pixelRatio;\n                canvas.height = height * pixelRatio;\n                canvas.style.width = width + 'px';\n                canvas.style.height = height + 'px';\n                ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n\n                const image = new Image();\n                image.onload = () => \n                {\n                    ctx.drawImage(image, 0, 0);\n                    URL.revokeObjectURL(url);\n\n                    const imageDataType = 'image/' + imageType;\n                    const imageURI = canvas.toDataURL(imageDataType).replace(imageDataType, 'image/octet-stream');\n                    downloadURL(fileName, imageURI);\n                };\n                image.src = url;\n            });\n        }\n        else\n        {\n            throw new Error('Cannot download file data of this type - can only download svg elements');\n        }\n    }\n}\n\nexport default SVGImageDownloader;\n","import TextDownloader from './TextDownloader.js';\n\nclass JSONDownloader extends TextDownloader\n{\n    constructor() { super(); }\n\n    /** @override */\n    downloadFile(fileName, downloadType, fileData, opts)\n    {\n        return super.downloadFile(fileName, downloadType, JSON.stringify(fileData), opts);\n    }\n}\n\nexport default JSONDownloader;","import TextDownloader from './TextDownloader.js';\nimport SVGImageDownloader from './SVGImageDownloader.js';\nimport JSONDownloader from './JSONDownloader.js';\n\nclass DownloadManager\n{\n    constructor()\n    {\n        this._downloaders = new Map();\n\n        this.addDownloader(new TextDownloader(), 'text');\n        this.addDownloader(new SVGImageDownloader(), 'image');\n        this.addDownloader(new JSONDownloader(), 'object');\n    }\n\n    /**\n     * Add downloader for the download type(s). If there are multiple downloaders sharing the same type, they will be\n     * given a chance to process in the order they were registered.\n     * \n     * @param {Downloader} downloader       the downloader associated with the download type\n     * @param {...String} downloadTypes     the download type preceded by a dot, such as '.txt' or '.config.json'\n     * @returns {this}\n     */\n    addDownloader(downloader, ...downloadTypes)\n    {\n        for (const downloadType of downloadTypes)\n        {\n            if (this._downloaders.has(downloadType))\n            {\n                this._downloaders.get(downloadType).push(downloader);\n            }\n            else\n            {\n                this._downloaders.set(downloadType, [downloader]);\n            }\n        }\n        return this;\n    }\n\n    /**\n     * Remove downloader for the download type. If the downloader is the last for the download\n     * type, the download type is removed as an available downloadable download type.\n     * \n     * @param {Downloader} downloader   the downloader to remove\n     * @param {String} downloadType     the download type to remove the downloader from\n     * @returns {this}\n     */\n    removeDownloader(downloader, downloadType)\n    {\n        if (this._downloaders.has(downloadType))\n        {\n            const downloaders = this._downloaders.get(downloadType);\n            downloaders.splice(downloaders.indexOf(downloader), 1);\n            if (downloaders.length <= 0)\n            {\n                this._downloaders.delete(downloadType);\n            }\n        }\n        return this;\n    }\n\n    /**\n     * Removes all downloaders for the download type. Essentially, the download type will no longer\n     * be an option for downloading.\n     * \n     * @param {String} downloadType the download type to remove all downloaders\n     */\n    clearDownloadersByDownloadType(downloadType)\n    {\n        this._downloaders.delete(downloadType);\n    }\n\n    /**\n     * Removes all downloaders and download types.\n     */\n    clear()\n    {\n        this._downloaders.clear();\n    }\n\n    /**\n     * Tries to download the export data with registered downloaders.\n     * \n     * @param {String} fileName the name of the exported file\n     * @param {String} downloadType the type of file data (NOT the file extension)\n     * @param {String} fileData the file data to download\n     * @param {Object} opts any additional arguments to pass to the downloader\n     * @returns {Promise} a Promise that resolves if downloaded without errors\n     */\n    tryDownloadFile(fileName, downloadType, fileData, opts)\n    {\n        // Find all valid downloaders\n        const downloaders = this.getDownloadersByDownloadType(downloadType);\n\n        // Try to download them ...\n        if (downloaders && downloaders.length > 0)\n        {\n            return downloaders.reduce(\n                (acc, value) => acc.catch(\n                    e => value.downloadFile(fileName, downloadType, fileData, opts)\n                ),\n                Promise.reject());\n        }\n        else\n        {\n            throw new Error('No valid downloaders found for download type');\n        }\n    }\n\n    /**\n     * Gets the associated downloaders (in order) for the download type.\n     * \n     * @param {String} downloadType the downloaders' download type\n     * @returns {Array.<Downloader>} a mutable array of downloaders\n     */\n    getDownloadersByDownloadType(downloadType)\n    {\n        return this._downloaders.get(downloadType);\n    }\n\n    /**\n     * Gets all available download types with downloaders.\n     * \n     * @returns {Iterable.<String>} a collection of download types\n     */\n    getDownloadTypes() { return this._downloaders.keys(); }\n\n    /**\n     * @returns {Boolean} whether there are available downloaders of any download type\n     */\n    isEmpty() { return this._downloaders.size <= 0; }\n}\n\nexport default DownloadManager;\n","import DownloadManager from './DownloadManager.js';\n\nclass ExportManager\n{\n    constructor()\n    {\n        this._exporters = new Map();\n        this._exportTypes = [];\n\n        this._downloaderManager = new DownloadManager();\n    }\n\n    /**\n     * Register exporter for the export type(s). There can only be an exporter for\n     * each export type, but there can be multiple export types per exporter. If the\n     * export type is already registered, this will replace it with the new exporter.\n     * \n     * @param {Exporter} exporter       the exporter associated with the export type\n     * @param {...String} exportTypes   the export type for the exporter (NOT the same as file type)\n     * @returns {this}\n     */\n    registerExporter(exporter, ...exportTypes)\n    {\n        for(const exportType of exportTypes)\n        {\n            this._exporters.set(exportType, exporter);\n            this._exportTypes.push(exportType);\n        }\n\n        return this;\n    }\n\n    /**\n     * Removes the exporter and any associated export types from the available\n     * export options.\n     * \n     * @param {Exporter} exporter the exporter to remove\n     * @returns {Array.<String>} a list of associated export types\n     */\n    unregisterExporter(exporter)\n    {\n        const dst = [];\n        for(const exportType of this._exporters.keys())\n        {\n            if (this._exporters.get(exportType) === exporter)\n            {\n                dst.push(exportType);\n            }\n        }\n\n        for(const exportType of dst)\n        {\n            this.unregisterExportType(exportType);\n        }\n        return dst;\n    }\n    \n    /**\n     * Removes the export type as an available export option. The associated exporter\n     * will also be removed, but if it was also registered to other export types, those\n     * are not changed. Use unregisterExporter() to remove everything related to the\n     * exporter.\n     * \n     * @param {String} exportType the export type to remove\n     * @returns {Exporter} the exporter associated with the export type\n     */\n    unregisterExportType(exportType)\n    {\n        const dst = this._exporters.get(exportType);\n        this._exporters.delete(exportType);\n\n        // Remove export type\n        const index = this._exportTypes.indexOf(exportType);\n        this._exportTypes.splice(index, 1);\n\n        return dst;\n    }\n\n    /**\n     * Removes all exporters and export types.\n     */\n    clear()\n    {\n        this._exporters.clear();\n        this._exportTypes.length = 0;\n    }\n\n    /**\n     * Tries to export the target to file.\n     * \n     * @param {String} exportType the export type for the target\n     * @param {*} target the target to export to data\n     * @returns {Promise} a Promise that will resolve if the target is successfully exported to file.\n     */\n    tryExportFile(exportType, target)\n    {\n        return this.tryExportTargetToData(exportType, target)\n            .then(result => this._downloaderManager.tryDownloadFile(\n                result['name'],\n                result['type'],\n                result['data'],\n                result))\n            .catch(err =>\n            {\n                throw new Error('Failed to export target to data:' + err.message);\n            });\n    }\n\n    /**\n     * Tries to export the target to export data.\n     * \n     * @param {String} exportType the export type for the target\n     * @param {*} target the target to export to data\n     * @returns {Promise} a Promise that will resolve if the target is successfully processed to a valid export data.\n     */\n    tryExportTargetToData(exportType, target)\n    {\n        if (!this._exporters.has(exportType))\n            throw new Error('Unable to export unregistered export type');\n\n        const exporter = this._exporters.get(exportType);\n        return exporter.exportTarget(exportType, target);\n    }\n\n    /**\n     * Gets the associated exporter for the export type.\n     * \n     * @param {String} exportType the registered export type\n     * @returns {Exporter} the associated exporter\n     */\n    getExporterByExportType(exportType)\n    {\n        return this._exporters.get(exportType);\n    }\n\n    /**\n     * Gets the available registered export types in order.\n     * \n     * @returns {Array.<String>} an array of export types\n     */\n    getExportTypes()\n    {\n        return this._exportTypes;\n    }\n\n    /**\n     * Gets the available registered exporters. This is, however, NOT in order.\n     * \n     * @returns {Iterable.<Exporter>} a collection of exporters\n     */\n    getExporters()\n    {\n        return this._exporters.values();\n    }\n\n    /**\n     * @returns {Boolean} whether there are available importers of any file type\n     */\n    isEmpty() { return this._exporters.size <= 0; }\n}\n\nexport default ExportManager;","import Uploader from './Uploader.js';\n\nclass TextUploader extends Uploader\n{\n    constructor() { super(); }\n\n    /** @override */\n    uploadFile(fileBlob)\n    {\n        return new Promise((resolve, reject) =>\n        {\n            const reader = new FileReader();\n\n            // If file reading successful...\n            reader.addEventListener('load', event =>\n            {\n                const fileData = event.target.result;\n                resolve(fileData);\n            });\n\n            // If file reading failed...\n            reader.addEventListener('error', event =>\n            {\n                reject(new Error('Unable to import file: ' + event.target.error.code));\n            });\n\n            // Now let's begin the read...\n            reader.readAsText(fileBlob);\n        });\n    }\n}\n\nexport default TextUploader;","class Uploader\n{\n    constructor() {}\n\t\n    uploadFile(fileBlob) { return Promise.resolve(fileBlob); }\n}\n\nexport default Uploader;","import { getFileExtFromName } from '../FileHelper.js';\nimport TextUploader from './TextUploader.js';\n\nclass ImportManager\n{\n    constructor()\n    {\n        this._importers = new Map();\n        this._metaTypes = new Map();\n\n        this._textUploader = new TextUploader();\n    }\n    \n    /**\n     * Add importer for the file type(s). If there are multiple importers sharing the same type, they will be\n     * given a chance to process in the order they were registered.\n     * \n     * @param {Importer} importer       the importer associated with the file type\n     * @param {...String} fileTypes     the file type preceded by a dot, such as '.txt' or '.config.json'\n     * @returns {this}\n     */\n    addImporter(importer, ...fileTypes)\n    {\n        for(const fileType of fileTypes)\n        {\n            this._addFileType(fileType);\n            this._importers.get(fileType).push(importer);\n        }\n        return this;\n    }\n\n    /**\n     * Remove importer for the file type. If the importer is the last for the file\n     * type, the file type is removed as an available importable file type.\n     * \n     * @param {Importer} importer   the importer to remove\n     * @param {String} fileType     the file type to remove the importer from\n     * @returns {this}\n     */\n    removeImporter(importer, fileType)\n    {\n        if (this._importers.has(fileType))\n        {\n            const importers = this._importers.get(fileType);\n            importers.splice(importers.indexOf(importer), 1);\n            if (importers.length <= 0)\n            {\n                this._removeFileType(fileType);\n            }\n        }\n        return this;\n    }\n\n    /**\n     * Removes all importers for the file type. Essentially, the file type will no longer\n     * be an option for importing.\n     * \n     * @param {String} fileType the file type to remove all importers\n     */\n    clearImportersByFileType(fileType)\n    {\n        this._removeFileType(fileType);\n    }\n\n    /**\n     * Removes all importers and file types.\n     */\n    clear()\n    {\n        this._importers.clear();\n        this._metaTypes.clear();\n    }\n\n    _addFileType(fileType)\n    {\n        if (this._importers.has(fileType)) return;\n\n        const fileExtIndex = fileType.lastIndexOf('.');\n        if (fileExtIndex < 0) throw new Error('File types must start with \\'.\\'');\n\n        // Register any file types with additional extensions BEFORE the last one.\n        if (fileExtIndex !== 0)\n        {\n            const fileExt = fileType.substring(fileExtIndex);\n            if (this._metaTypes.has(fileExt))\n            {\n                const metaTypes = this._metaTypes.get(fileExt);\n                metaTypes.push(fileType);\n                metaTypes.sort((a, b) =>\n                {\n                    const patternA = a.match(/\\./g);\n                    const patternB = a.match(/\\./g);\n                    return patternA.length - patternB.length;\n                });\n            }\n            else\n            {\n                if (!this._importers.has(fileExt)) this._importers.set(fileExt, []);\n\n                this._metaTypes.set(fileExt, [fileType]);\n            }\n        }\n\n        this._importers.set(fileType, []);\n    }\n\n    _removeFileType(fileType)\n    {\n        this._importers.delete(fileType);\n\n        const fileExtIndex = fileType.lastIndexOf('.');\n        if (fileExtIndex !== 0)\n        {\n            const fileExt = fileType.substring(fileExtIndex);\n            const metaTypes = this._metaTypes.get(fileExt);\n            metaTypes.splice(metaTypes.indexOf(fileExt), 1);\n            if (metaTypes.length <= 0)\n            {\n                this._metaTypes.delete(fileExt);\n            }\n        }\n    }\n\n    /**\n     * Tries to import the file blob with registered importers.\n     * \n     * @param {File} fileBlob the file to import\n     * @returns {Promise} a Promise that resolves if imported without errors\n     */\n    tryImportFile(fileBlob)\n    {\n        if (!fileBlob) throw new Error('Unable to import null file');\n        if (!(fileBlob instanceof File)) throw new Error('Unable to import object as file');\n\n        return this._textUploader.uploadFile(fileBlob)\n            .then(result =>\n            {\n                const fileName = fileBlob.name;\n                const fileType = getFileExtFromName(fileName);\n                const fileData = result;\n                return this.tryImportFileFromData(fileName, fileType, fileData);\n            })\n            .catch(err =>\n            {\n                throw new Error('Failed to import file: ' + err.message);\n            });\n    }\n\n    /**\n     * Tries to import the file data with registered importers. This is usually used\n     * in a chain after tryUploadFile(), since this method processes \"uploaded\" file\n     * data (not file blobs) into objects used by the application.\n     * \n     * The file data is outputted by uploaders, which take file blobs.\n     * \n     * For ease of use, this entire chain is done by tryImportFile().\n     * \n     * @param {String} fileName the name of the target file\n     * @param {String} fileType the type of the target file (usually just the file extension)\n     * @param {String} fileData the file data to import\n     * @returns {Promise} a Promise that resolves if imported without errors\n     */\n    tryImportFileFromData(fileName, fileType, fileData)\n    {\n        // Find all valid importers\n        const importers = [];\n\n        if (this._metaTypes.has(fileType))\n        {\n            // ...for meta file types...\n            const metaTypes = this._metaTypes.get(fileType);\n            for (const metaType of metaTypes)\n            {\n                if (fileName.endsWith(metaType))\n                {\n                    for(const importer of this.getImportersByFileType(metaType))\n                    {\n                        importers.push({\n                            src: importer,\n                            type: metaType\n                        });\n                    }\n                }\n            }\n        }\n\n        // ...for file extensions...\n        for(const importer of this.getImportersByFileType(fileType))\n        {\n            importers.push({\n                src: importer,\n                type: fileType\n            });\n        }\n\n        // Try to import them ...\n        if (importers && importers.length > 0)\n        {\n            return importers.reduce(\n                (acc, value) => acc.catch(\n                    err => value.src.importFileData(fileName, value.type, fileData)\n                ),\n                Promise.reject());\n        }\n        else\n        {\n            throw new Error('No valid importers found for file');\n        }\n    }\n\n    /**\n     * Gets the associated importers (in order) for the file type.\n     * \n     * @param {String} fileType the importers' file type\n     * @returns {Array.<Importer>} a mutable array of importers\n     */\n    getImportersByFileType(fileType)\n    {\n        return this._importers.get(fileType);\n    }\n\n    /**\n     * Gets all available file types with importers.\n     * \n     * @returns {Iterable.<String>} a collection of file types\n     */\n    getFileTypes() { return this._importers.keys(); }\n\n    /**\n     * Gets the <input> accept attribute string for all available file types with importeres.\n     * \n     * @returns {String} a string with all valid file exts\n     */\n    getFileTypesAsAcceptString()\n    {\n        const dst = Array.from(this._importers.keys());\n        return dst.join(',');\n    }\n\n    /**\n     * @returns {Boolean} whether there are available importers of any file type\n     */\n    isEmpty() { return this._importers.size <= 0; }\n}\n\nexport default ImportManager;\n","import Modules from 'modules/Modules.js';\nimport * as URLHelper from 'util/URLHelper.js';\nimport { guid } from 'util/MathHelper.js';\n\nimport Logger from 'util/logger/Logger.js';\nconst LOGGER_TAG = 'Session';\n\nconst DEFAULT_MODULE_ID = 'fsa';\nexport const CURRENT_MODULE_STORAGE_ID = 'currentModule';\nconst MODULE_LOAD_DELAY = 300;\nlet MODULE_TIMEOUT = null;\n\nclass Session\n{\n    constructor()\n    {\n        this._name = I18N.toString('file.untitled');\n        this._module = null;\n        this._moduleClass = null;\n        this._moduleStarted = false;\n        this._app = null;\n\n        this._sessionID = null;\n\n        this._listeners = [];\n        this._taskViewConfig = null;\n    }\n\n    addListener(listener)\n    {\n        this._listeners.push(listener);\n        return this;\n    }\n\n    startSession(app, moduleName = null)\n    {\n        if (this._module !== null) return;\n\n        Logger.out(LOGGER_TAG, `Starting session for module '${moduleName}'...`);\n\n        // Load from storage, url, or default, if not specified...\n        if (!moduleName || moduleName.length <= 0)\n        {\n            const urlParams = URLHelper.getURLParameters(URLHelper.getCurrentURL());\n            if ('module' in urlParams) moduleName = urlParams['module'];\n            if (!moduleName || moduleName.length <= 0)\n            {\n                moduleName = DEFAULT_MODULE_ID;\n            }\n        }\n\n        // Check registered module info...\n        let moduleInfo = Modules[moduleName];\n        if (!moduleInfo)\n        {\n            moduleName = DEFAULT_MODULE_ID;\n            moduleInfo = Modules[moduleName];\n            \n            if (!moduleInfo)\n            {\n                window.alert('Cannot find registered module with id \\'' + moduleName + '\\'');\n                return;\n            }\n        }\n        const useExperimental = moduleInfo['experimental'];\n        if (useExperimental && !app.isExperimental())\n        {\n            window.alert('Cannot load experimental module with id \\'' + moduleName + '\\' on stable app version.');\n            return;\n        }\n        else if (!useExperimental && app.isExperimental())\n        {\n            window.alert('Cannot load stable module with id \\'' + moduleName + '\\' on experimental app version.');\n            return;\n        }\n\n        // Overwrite any past calls...\n        if (MODULE_TIMEOUT) clearTimeout(MODULE_TIMEOUT);\n\n        MODULE_TIMEOUT = setTimeout(() =>\n        {\n            moduleInfo.fetch((ModuleClass) =>\n            {\n                MODULE_TIMEOUT = null;\n\n                this._app = app;\n                this._moduleClass = ModuleClass;\n                this._sessionID = '#' + guid();\n                try\n                {\n                    this._module = new ModuleClass(app);\n\n                    // Allows renderers to be created...\n                    app.forceUpdate();\n\n                    this._module.initialize(app);\n\n                    for (const listener of this._listeners)\n                    {\n                        listener.onSessionStart(this);\n                    }\n\n                    this._moduleStarted = true;\n                }\n                catch (e)\n                {\n                    window.alert('Could not load module with id \\'' + moduleName + '\\':\\n' + e.message);\n                }\n            });\n        }, MODULE_LOAD_DELAY);\n    }\n\n    restartSession(app, moduleName = null)\n    {\n        if (this._module === null) throw new Error('Cannot restart session that is not yet started');\n\n        this.stopSession(app);\n        this.startSession(app, moduleName);\n    }\n\n    updateSession(app)\n    {\n        if (this._module && this._moduleStarted)\n        {\n            this._module.update(app);\n        }\n    }\n\n    stopSession(app)\n    {\n        if (this._module === null) return;\n\n        Logger.out(LOGGER_TAG, 'Stopping session...');\n\n        for (const listener of this._listeners)\n        {\n            listener.onSessionStop(this);\n        }\n\n        this._module.destroy(this._app);\n        this._moduleStarted = false;\n        this._moduleClass = null;\n        this._module = null;\n        this._sessionID = null;\n        this._app = null;\n    }\n\n    setProjectName(name)\n    {\n        if (!name || name.length <= 0)\n        {\n            this._name = I18N.toString('file.untitled');\n        }\n        else\n        {\n            this._name = name;\n        }\n\n        const value = this._name;\n        const element = document.getElementById('window-title');\n        const string = element.innerHTML;\n        const separator = string.indexOf('-');\n        if (separator !== -1)\n        {\n            element.innerHTML = string.substring(0, separator).trim() + ' - ' + value;\n        }\n        else\n        {\n            element.innerHTML = string + ' - ' + value;\n        }\n    }\n\n    getProjectName() { return this._name; }\n    getCurrentModule() { return this._module; }\n    isModuleLoaded() { return this._module !== null; }\n    getSessionID() { return this._sessionID; }\n    getApp() { return this._app; }\n    setTaskViewConfig(config) { this._taskViewConfig = config || null; }\n    getTaskViewConfig() { return this._taskViewConfig; }\n    isTaskView() { return !!this._taskViewConfig; }\n}\n\nexport default Session;\n","/**\n * Contains utility functions for url-related actions.\n * @module URLHelper\n */\n\n/**\n * Gets the current window's url,\n * \n * @returns {String} the current url\n */\nexport function getCurrentURL()\n{\n    return window.location.href;\n}\n\n/**\n * Gets the parameters in the url.\n * Refer to {@link https://gomakethings.com/getting-all-query-string-values-from-a-url-with-vanilla-js/} for more information.\n * \n * @param {String} url the full url\n * @returns {Object} an object mapping from parameter name to value\n */\nexport function getURLParameters(url)\n{\n    const result = {};\n    const parser = document.createElement('a');\n    parser.href = url;\n    const query = parser.search.substring(1);\n    const vars = query.split('&');\n    for(const v of vars)\n    {\n        const pair = v.split('=');\n        result[pair[0]] = decodeURIComponent(pair[1]);\n    }\n    return result;\n}\n","class DrawerManager\n{\n    constructor()\n    {\n        this._panelClasses = [];\n        this._panelProps = null;\n    }\n\n    setPanelProps(props)\n    {\n        this._panelProps = props;\n        return this;\n    }\n\n    addPanelClass(panelClass)\n    {\n        this._panelClasses.push(panelClass);\n        return this;\n    }\n\n    //DuckType(SessionListener)\n    onSessionStart(session)\n    {\n    \n    }\n\n    //DuckType(SessionListener)\n    onSessionStop(session)\n    {\n        this._panelClasses.length = 0;\n        this._panelProps = null;\n    }\n\n    getPanelProps()\n    {\n        return this._panelProps;\n    }\n\n    getPanelClasses()\n    {\n        return this._panelClasses;\n    }\n}\n\nexport default DrawerManager;\n","class MenuManager\n{\n    constructor()\n    {\n        this._panelClasses = [];\n        this._panelProps = null;\n        this._subtitleComponentClass = null;\n    }\n\n    setSubtitleComponentClass(componentClass)\n    {\n        this._subtitleComponentClass = componentClass;\n    }\n\n    setPanelProps(props)\n    {\n        this._panelProps = props;\n        return this;\n    }\n\n    addPanelClass(panelClass)\n    {\n        this._panelClasses.push(panelClass);\n        return this;\n    }\n\n    //DuckType(SessionListener)\n    onSessionStart(session)\n    {\n    }\n\n    //DuckType(SessionListener)\n    onSessionStop(session)\n    {\n        session.getApp().getToolbarComponent().closeBar();\n    \n        this._panelClasses.length = 0;\n        this._panelProps = null;\n    }\n\n    getPanelProps()\n    {\n        return this._panelProps;\n    }\n\n    getPanelClasses()\n    {\n        return this._panelClasses;\n    }\n\n    getSubtitleComponentClass()\n    {\n        return this._subtitleComponentClass;\n    }\n}\n\nexport default MenuManager;\n","class ViewportManager\n{\n    constructor()\n    {\n        this._viewClasses = [];\n        this._viewProps = null;\n    }\n\n    setViewProps(props)\n    {\n        this._viewProps = props;\n        return this;\n    }\n\n    addViewClass(viewClass)\n    {\n        this._viewClasses.push(viewClass);\n        return this;\n    }\n\n    //DuckType(SessionListener)\n    onSessionStart(session)\n    {\n\n    }\n\n    //DuckType(SessionListener)\n    onSessionStop(session)\n    {\n        this._viewClasses.length = 0;\n        this._viewProps = null;\n    }\n\n    getViewProps()\n    {\n        return this._viewProps;\n    }\n\n    getViewClasses()\n    {\n        return this._viewClasses;\n    }\n}\n\nexport default ViewportManager;\n","import React from 'react';\nimport Style from './HotKeyView.css';\n\nconst AVAILABLE_HOTKEY_REFRESH_RATE = 100;\n\nclass HotKeyView extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this._cachedHotKeys = [];\n        this._cacheTimeout = null;\n    }\n\n    /** @override */\n    render()\n    {\n        const hotKeyManager = this.props.hotKeyManager;\n        const showHotKeys = !this.props.disabled && hotKeyManager.isEnabled();\n\n        if (!this._cacheTimeout && showHotKeys)\n        {\n            this._cacheTimeout = setTimeout(() => \n            {\n                this._cacheTimeout = null;\n                this._cachedHotKeys.length = 0;\n                hotKeyManager.getCurrentlyPossibleHotKeys(this._cachedHotKeys);\n            }, AVAILABLE_HOTKEY_REFRESH_RATE);\n        }\n\n        const useCount = hotKeyManager.getCurrentHotKeyRepeatCount();\n        const currentHotKey = hotKeyManager.getCurrentHotKey();\n\n        return (\n            <div id={this.props.id}\n                className={Style.hotkey_container +\n          ' ' + this.props.className}\n                style={this.props.style}>\n                {showHotKeys && this._cachedHotKeys.map((e, i) => \n                {\n                    const isActive = currentHotKey === e;\n                    return (\n                        <div key={e.localizedKeys + ':' + i + ':' + (isActive ? useCount : 0)}\n                            className={Style.hotkey +\n                (isActive ? ' active ' : '')}>\n                            <label className={Style.hotkey_label}>\n                                {e.localizedKeys}\n                            </label>\n                            <label className={Style.hotkey_name}>\n                                {e.name + (isActive && useCount > 1 ? ' x' + useCount : '')}\n                            </label>\n                        </div>\n                    );\n                })}\n            </div>\n        );\n    }\n}\n\nexport default HotKeyView;\n","import Logger from 'util/logger/Logger.js';\nconst LOGGER_TAG = 'UndoManager';\n\nconst MAX_HISTORY_LENGTH = 1000;\n\nclass UndoManager\n{\n    constructor()\n    {\n        this.history = [];\n        this.offsetIndex = 0;\n\n        this._handlerFactory = null;\n    }\n\n    setEventHandlerFactory(factory)\n    {\n        this._handlerFactory = factory;\n        return this;\n    }\n\n    //DuckType(SessionListener)\n    onSessionStart(session)\n    {\n\n    }\n\n    //DuckType(SessionListener)\n    onSessionStop(session)\n    {\n        this.clear();\n    }\n\n    captureEvent(...args)\n    {\n        if (typeof this._handlerFactory === 'function')\n        {\n            const handler = this._handlerFactory(args);\n            if (handler)\n            {\n                this.captureEventAsHandler(handler);\n            }\n            else\n            {\n                throw new Error('Cannot create valid undo event handler for capture');\n            }\n        }\n        else\n        {\n            Logger.error(LOGGER_TAG, 'Missing default undo event handler for event capture');\n        }\n    }\n\n    captureEventAsHandler(eventHandler)\n    {\n        //Pop it all until current event\n        while (this.offsetIndex > 0)\n        {\n            this.history.pop();\n            --this.offsetIndex;\n        }\n\n        //Push the current event to the stack\n        this.history.push(eventHandler);\n\n        while (this.history.length > MAX_HISTORY_LENGTH)\n        {\n            this.history.unshift();\n        }\n    }\n\n    getPreviousEvent()\n    {\n        if (!this.canUndo()) return null;\n        return this.history[this.history.length - this.offsetIndex - 1];\n    }\n\n    getNextEvent()\n    {\n        if (!this.canRedo()) return null;\n        return this.history[this.history.length - this.offsetIndex + 1];\n    }\n\n    undo()\n    {\n        if (!this.canUndo())\n        {\n            //Already the oldest recorded event!\n            return;\n        }\n\n        const event = this.history[this.history.length - this.offsetIndex - 1];\n        ++this.offsetIndex;\n\n        event.applyUndo(this);\n    }\n\n    canUndo()\n    {\n        return this.offsetIndex < this.history.length;\n    }\n\n    redo()\n    {\n        if (!this.canRedo())\n        {\n            //Already the most recent event!\n            return;\n        }\n\n        --this.offsetIndex;\n        const event = this.history[this.history.length - this.offsetIndex - 1];\n\n        event.applyRedo(this);\n    }\n\n    canRedo()\n    {\n        return this.offsetIndex > 0;\n    }\n\n    clear()\n    {\n        this.history.length = 0;\n        this.offsetIndex = 0;\n    }\n\n    getEventHandlerFactory() { return this._handlerFactory; }\n}\n\nexport default UndoManager;\n","import {ONESHOT_MODE} from 'experimental/tooltip/TooltipView.js';\n\nclass TooltipManager\n{\n    constructor()\n    {\n        this._tooltips = [];\n\n        this._transitionMode = ONESHOT_MODE;\n    }\n\n    setTransitionMode(transitionMode)\n    {\n        this._transitionMode = transitionMode;\n        return this;\n    }\n\n    addTooltip(tooltip)\n    {\n        this._tooltips.push(tooltip);\n        return this;\n    }\n\n    //DuckType(SessionListener)\n    onSessionStart(session)\n    {\n\n    }\n\n    //DuckType(SessionListener)\n    onSessionStop(session)\n    {\n        this._tooltips.length = 0;\n        this._transitionMode = ONESHOT_MODE;\n    }\n\n    getTransitionMode() { return this._transitionMode; }\n    getTooltips() { return this._tooltips; }\n    hasTooltips() { return this._tooltips.length > 0; }\n}\n\nexport default TooltipManager;\n","class StyleEntry\n{\n    constructor(name, value)\n    {\n        this._name = name;\n        this._value = value;\n    }\n\n    getValue() { return this._value; }\n    getName() { return this._name; }\n}\n\nexport default StyleEntry;\n","import Logger from 'util/logger/Logger.js';\nimport StyleEntry from './style/StyleEntry.js';\n\nconst LOGGER_TAG = 'Theme';\n//TODO: this should be only lang/ when have server\nconst BASE_URL = 'dist/theme/';\n\nclass Theme\n{\n    constructor(themeName, styleMapping = new Map())\n    {\n        this._name = themeName;\n        this._styles = styleMapping;\n    }\n\n    static fetchThemeFile(themeName, callback)\n    {\n        Logger.out(LOGGER_TAG, `Fetching theme file '${themeName}'...`);\n        const request = new XMLHttpRequest();\n        request.onreadystatechange = function () \n        {\n            if (request.readyState === 4/* READY */ &&\n                request.status === 200/* GOT REPONSE */)\n            {\n                const result = request.responseText;\n                callback(result);\n            }\n        };\n        request.onerror = function () \n        {\n            Logger.out(LOGGER_TAG, `Unable to find theme file for '${themeName}'.`);\n        };\n        request.open('GET', BASE_URL + themeName + '.theme', true);\n        request.setRequestHeader('Content-Type', 'text/strings');\n        request.send();\n    }\n\n    static loadThemeFile(themeName, themeData, callback)\n    {\n        Logger.out(LOGGER_TAG, `Loading theme file '${themeName}'...`);\n\n        const result = new Theme(themeName);\n\n        //Load theme file\n        let separator, key, value;\n        const lines = themeData.split('\\n');\n        for (let line of lines)\n        {\n            line = line.trim();\n            if (line.startsWith('//')) continue;\n            if (line.startsWith('//TODO:'))\n            {\n                Logger.out(LOGGER_TAG, `Warning - found incomplete theme file: theme file '${line.substring('//'.length).trim()}'.`);\n            }\n\n            separator = line.indexOf('=');\n            if (separator < 0) continue;\n\n            key = line.substring(0, separator).trim();\n            value = line.substring(separator + 1).trim();\n            if (key.length == 0) continue;\n\n            result._styles.set(key, new StyleEntry(key, value));\n        }\n\n        Logger.out(LOGGER_TAG, `Theme file '${themeName}' loaded.`);\n\n        callback(result);\n    }\n\n    addStyle(variableName, value)\n    {\n        this._styles.set(variableName, new StyleEntry(variableName, value));\n        return this;\n    }\n\n    removeStyle(variableName)\n    {\n        this._styles.delete(variableName);\n        return this;\n    }\n\n    getStyles() { return this._styles.values(); }\n    getStyleByName(variableName) { return this._styles.get(variableName); }\n    getName() { return this._name; }\n}\n\nexport default Theme;","import StyleEntry from './StyleEntry.js';\n\nclass SourceStyleEntry extends StyleEntry\n{\n    constructor(styleManager, variableName, sourceStyle=null, sourceTransform=null)\n    {\n        super(variableName, styleManager.getComputedValue(variableName));\n        this._styleManager = styleManager;\n        this._children = [];\n\n        //Since children are ONLY updated in the constructor, they are never removed\n        if (sourceStyle)\n        {\n            this._source = sourceStyle;\n            sourceStyle._children.push(this);\n        }\n\n        //This is useless without sourceStyle, but hey, you do you.\n        this._sourceTransform = sourceTransform;\n    }\n\n    updateValue(propagateChange=true)\n    {\n        if (this._source)\n        {\n            const sourceValue = this._source.getValue();\n            if (this._sourceTransform)\n            {\n                const newValue = this._sourceTransform.call(this, sourceValue);\n                this._value = newValue;\n            }\n            else\n            {\n                this._value = sourceValue;\n            }\n\n            if (propagateChange)\n            {\n                this._styleManager.setComputedValue(this._name, this._value);\n                for(const child of this._children)\n                {\n                    child.updateValue(true);\n                }\n            }\n        }\n    }\n\n    setValue(value, propagateChange=true)\n    {\n        this._value = value;\n\n        if (propagateChange)\n        {\n            this._styleManager.setComputedValue(this._name, value);\n            for(const child of this._children)\n            {\n                child.updateValue(true);\n            }\n        }\n    }\n\n    getSourceStyle() { return this._source; }\n    getSourceTransform() { return this._sourceTransform; }\n    getDerivedStyles() { return this._children; }\n    getStyleManager() { return this._styleManager; }\n}\n\nexport default SourceStyleEntry;\n","import Theme from './Theme.js';\nimport SourceStyleEntry from './style/SourceStyleEntry.js';\n\nconst DEFAULT_GROUP_NAME = 'general';\nconst DEFAULT_THEME_NAME = 'default';\n// const COMPUTED_THEME_NAME = 'computed';\n\nclass ThemeManager\n{\n    constructor()\n    {\n        this._styles = new Map();\n        this._groups = new Map();\n        this._element = null;\n        this._elementTheme = null;\n\n        this._theme = null;\n    }\n\n    register(variableName, groupName = DEFAULT_GROUP_NAME, sourceStyle = null, sourceTransform = null)\n    {\n        const styleEntry = new SourceStyleEntry(this, variableName, sourceStyle, sourceTransform);\n        if (this._element)\n        {\n            const computedValue = this.getComputedValue(variableName);\n            styleEntry.setValue(computedValue, false);\n            this._elementTheme.addStyle(variableName, computedValue);\n        }\n        this._styles.set(variableName, styleEntry);\n\n        if (this._groups.has(groupName))\n        {\n            this._groups.get(groupName).push(variableName);\n        }\n        else\n        {\n            this._groups.set(groupName, [variableName]);\n        }\n        return styleEntry;\n    }\n\n    unregister(variableName)\n    {\n        this._styles.delete(variableName);\n\n        for (const styleGroup of this._groups.values())\n        {\n            const index = styleGroup.indexOf(variableName);\n            if (index >= 0)\n            {\n                styleGroup.splice(index, 1);\n            }\n        }\n\n        if (this._element)\n        {\n            this._elementTheme.removeStyle(variableName);\n        }\n    }\n\n    clear()\n    {\n        this._groups.clear();\n        this._styles.clear();\n        this._element = null;\n        this._elementTheme = null;\n    }\n\n    setElement(element)\n    {\n        this._element = element;\n        this._elementTheme = new Theme(DEFAULT_THEME_NAME);\n        for (const style of this._styles.values())\n        {\n            style.setValue(this.getComputedValue(style.getName()), false);\n        }\n        return this;\n    }\n\n    reset()\n    {\n        const theme = this._theme || this._elementTheme;\n        if (theme)\n        {\n            for (const style of this._styles.values())\n            {\n                const styleName = style.getName();\n                const themeStyle = theme.getStyleByName(styleName);\n                if (themeStyle)\n                {\n                    style.setValue(themeStyle.getValue());\n                }\n                else if (style.getSourceStyle())\n                {\n                    style.updateValue();\n                }\n                else if (theme !== this._elementTheme)\n                {\n                    const elementStyle = this._elementTheme.getStyleByName(styleName);\n                    if (elementStyle)\n                    {\n                        style.setValue(elementStyle.getValue());\n                    }\n                }\n            }\n        }\n    }\n\n    loadTheme(themeName)\n    {\n        if (this._theme && this._theme.getName() === themeName)\n        {\n            this.reset();\n        }\n        else if (themeName === DEFAULT_THEME_NAME)\n        {\n            this._theme = this._elementTheme;\n            this.reset();\n        }\n        else\n        {\n            Theme.fetchThemeFile(themeName, (themeFile) => \n            {\n                Theme.loadThemeFile(themeName, themeFile, (theme) => \n                {\n                    this._theme = theme;\n                    this.reset();\n                });\n            });\n        }\n    }\n\n    getComputedValue(variableName)\n    {\n        const computedStyle = window.getComputedStyle(this._element);\n        const value = computedStyle.getPropertyValue(variableName);\n        if (value)\n        {\n            return value.trim();\n        }\n        else\n        {\n            return null;\n        }\n    }\n\n    setComputedValue(variableName, value)\n    {\n        this._element.style.setProperty(variableName, value);\n    }\n\n    getValue(variableName)\n    {\n        if (this._styles.has(variableName))\n        {\n            return this._styles.get(variableName).getValue();\n        }\n        else\n        {\n            return this.getComputedValue(variableName);\n        }\n    }\n\n    getStylesByGroup(groupName)\n    {\n        if (this._groups.has(groupName))\n        {\n            return this._groups.get(groupName).map(variableName => this._styles.get(variableName));\n        }\n        else\n        {\n            return null;\n        }\n    }\n\n    getStyleByName(variableName)\n    {\n        if (this._styles.has(variableName))\n        {\n            return this._styles.get(variableName);\n        }\n        else\n        {\n            return null;\n        }\n    }\n\n    getStyles()\n    {\n        return this._styles.values();\n    }\n\n    getStyleNames()\n    {\n        return this._styles.keys();\n    }\n\n    getStyleGroupNames()\n    {\n        return this._groups.keys();\n    }\n\n    getCurrentTheme()\n    {\n        return this._theme || this._elementTheme;\n    }\n}\n\nexport default ThemeManager;","const Broadcast = {\n    _channel: null,\n    _listeners: [],\n    initialize(channelName)\n    {\n        if (!this.isSupported()) return;\n\n        this._channel = new BroadcastChannel(channelName);\n        this._channel.onmessage = this.onBroadcastMessage.bind(this);\n    },\n    destroy()\n    {\n        if (!this.isSupported()) return;\n\n        this._channel.close();\n        this._channel = null;\n        this._listeners.length = 0;\n    },\n    addListener(listener)\n    {\n        this._listeners.push(listener);\n        return this;\n    },\n    removeListener(listener)\n    {\n        this._listeners.splice(this._listeners.indexOf(listener), 1);\n    },\n    sendMessage(source, destination, type, data={})\n    {\n        if (!this.isSupported()) return;\n\n        const result = {\n            type: type,\n            src: source,\n            dst: destination\n        };\n\n        Object.assign(result, data);\n        this._channel.postMessage(result);\n    },\n    onBroadcastMessage(ev)\n    {\n        const messageType = ev.data['type'];\n        const messageSource = ev.data['src'];\n        const messageDestination = ev.data['dst'];\n        for(const listener of this._listeners)\n        {\n            if (typeof listener['onBroadcastMessage'] === 'function')\n            {\n                listener.onBroadcastMessage(messageType, messageSource, messageDestination, ev.data);\n            }\n        }\n    },\n    getListeners()\n    {\n        return this._listeners;\n    },\n    getChannel()\n    {\n        return this._channel;\n    },\n    isSupported()\n    {\n        return 'BroadcastChannel' in self;\n    }\n};\n\nexport default Broadcast;\n","class RemoteSession\n{\n    constructor(sessionID, sessionName)\n    {\n        this._sessionID = sessionID;\n        this._sessionName = sessionName;\n    }\n\n    getSessionID()\n    {\n        return this._sessionID;\n    }\n\n    getSessionName()\n    {\n        return this._sessionName;\n    }\n}\n\nexport default RemoteSession;\n","import Broadcast from 'util/broadcast/Broadcast.js';\nimport RemoteSession from './RemoteSession.js';\nimport {stringHash} from 'util/MathHelper.js';\n\nconst SESSION_START_MESSAGE_TYPE = 'session-start';\nconst SESSION_UPDATE_MESSAGE_TYPE = 'session-update';\nconst SESSION_STOP_MESSAGE_TYPE = 'session-stop';\n\nclass BroadcastManager\n{\n    constructor(app)\n    {\n        this._app = app;\n        this._session = null;\n        this._sessionID = null;\n        this._remoteSessions = new Map();\n\n        this._handlers = [];\n    }\n\n    addMessageHandler(handler)\n    {\n        this._handlers.push(handler);\n        handler.setBroadcastManager(this);\n        return this;\n    }\n\n    removeMessageHandler(handler)\n    {\n        this._handlers.splice(this._handlers.indexOf(handler), 1);\n    }\n\n    clear()\n    {\n        this._handlers.length = 0;\n    }\n\n    sendMessageTo(dst, type, message)\n    {\n        Broadcast.sendMessage(this._sessionID, dst, type, message);\n    }\n\n    //DuckType(BroadcastListener)\n    onBroadcastMessage(type, src, dst, message)\n    {\n    //Ignore any messages not meant for me ;)\n        if (dst && dst.startsWith('#') && dst !== this._sessionID) return;\n\n        if (type === SESSION_START_MESSAGE_TYPE)\n        {\n            this._remoteSessions.set(src, new RemoteSession(src, message['name'] || 'Workspace #' + stringHash(src)));\n            Broadcast.sendMessage(this._sessionID, src, SESSION_UPDATE_MESSAGE_TYPE);\n        }\n        else if (type === SESSION_STOP_MESSAGE_TYPE)\n        {\n            this._remoteSessions.delete(src);\n        }\n        else if (type === SESSION_UPDATE_MESSAGE_TYPE)\n        {\n            this._remoteSessions.set(src, new RemoteSession(src, message['name'] || 'Workspace #' + stringHash(src)));\n        }\n        else\n        {\n            //Try to handle the message\n            for(const handler of this._handlers)\n            {\n                const result = handler.onBroadcastMessage(type, src, dst, message);\n\n                //If the message is handled, consume it.\n                if (result) break;\n            }\n        }\n    }\n\n    //DuckType(SessionListener)\n    onSessionStart(session)\n    {\n        this._session = session;\n        this._sessionID = session.getSessionID();\n\n        Broadcast.addListener(this);\n        Broadcast.sendMessage(this._sessionID, 'all', SESSION_START_MESSAGE_TYPE);\n    }\n\n    //DuckType(SessionListener)\n    onSessionStop(session)\n    {\n        Broadcast.sendMessage(this._sessionID, 'all', SESSION_STOP_MESSAGE_TYPE);\n        Broadcast.removeListener(this);\n\n        this.clear();\n        this._session = null;\n        this._sessionID = null;\n    }\n\n    getRemoteSessions() { return this._remoteSessions.values(); }\n    getSessionID() { return this._sessionID; }\n    getSession() { return this._session; }\n    getApp() { return this._app; }\n}\n\nexport default BroadcastManager;\n","import React from 'react';\nimport { hot } from 'react-hot-loader/root';\nimport Style from './App.css';\n\nimport DrawerView, { DRAWER_SIDE_RIGHT, DRAWER_SIDE_BOTTOM, DRAWER_BAR_DIRECTION_VERTICAL, DRAWER_BAR_DIRECTION_HORIZONTAL } from 'experimental/drawer/DrawerView.js';\nimport TaskViewButtonBar from 'experimental/TaskViewButtonBar.js';\nimport TooltipView from 'experimental/tooltip/TooltipView.js';\nimport UploadDropZone from 'experimental/components/UploadDropZone.js';\nimport NotificationView from 'session/manager/notification/components/NotificationView.js';\nimport IconButton from 'experimental/components/IconButton.js';\nimport FullscreenWidget from 'experimental/components/FullscreenWidget.js';\n\nimport ExportPanel from 'experimental/menus/export/ExportPanel.js';\nimport LanguagePanel from 'experimental/menus/language/LanguagePanel.js';\nimport ModuleLoaderPanel from 'experimental/menus/moduleloader/ModuleLoaderPanel.js';\n\n\n\nimport * as ColorTransform from 'util/ColorTransform.js';\n\nimport ExportManager from 'util/file/export/ExportManager.js';\nimport ImportManager from 'util/file/import/ImportManager.js';\n\nimport Session from 'session/Session.js';\nimport DrawerManager from 'session/manager/DrawerManager.js';\nimport MenuManager from 'session/manager/MenuManager.js';\nimport ViewportManager from 'session/manager/ViewportManager.js';\nimport HotKeyManager, { CTRL_KEY, SHIFT_KEY } from 'session/manager/hotkey/HotKeyManager.js';\nimport HotKeyView from 'session/manager/hotkey/HotKeyView.js';\nimport UndoManager from 'session/manager/undo/UndoManager.js';\nimport RenderManager, {\n    RENDER_LAYER_WORKSPACE_PRE,\n    RENDER_LAYER_WORKSPACE,\n    RENDER_LAYER_WORKSPACE_POST,\n} from 'session/manager/RenderManager.js';\nimport TooltipManager from 'session/manager/TooltipManager.js';\nimport NotificationManager, { ERROR_LAYOUT_ID } from 'session/manager/notification/NotificationManager.js';\nimport ThemeManager from '../util/theme/ThemeManager';\nimport BroadcastManager from 'session/manager/broadcast/BroadcastManager.js';\nimport Broadcast from 'util/broadcast/Broadcast.js';\n\nconst DRAWER_INDEX_ABOUT = 0;\n\nconst MENU_INDEX_EXPORT = 0;\nconst MENU_INDEX_LANGUAGE = 1;\nconst MENU_INDEX_MODULE = 2;\n\nconst BROADCAST_CHANNEL_ID = 'flapjs';\n\nfunction normalizeSingleQuotedJSONStringValues(raw)\n{\n    if (!raw || raw.indexOf('\\'') < 0) return raw;\n\n    let result = '';\n    let inDoubleString = false;\n    let inSingleString = false;\n    let escaped = false;\n    let singleBuffer = '';\n\n    for (let i = 0; i < raw.length; ++i)\n    {\n        const ch = raw.charAt(i);\n\n        if (inSingleString)\n        {\n            if (escaped)\n            {\n                // Decode the escaped char for the single-quoted source fragment.\n                singleBuffer += ch;\n                escaped = false;\n                continue;\n            }\n\n            if (ch === '\\\\')\n            {\n                escaped = true;\n                continue;\n            }\n\n            if (ch === '\\'')\n            {\n                result += JSON.stringify(singleBuffer);\n                singleBuffer = '';\n                inSingleString = false;\n                continue;\n            }\n\n            singleBuffer += ch;\n            continue;\n        }\n\n        if (inDoubleString)\n        {\n            result += ch;\n            if (escaped)\n            {\n                escaped = false;\n            }\n            else if (ch === '\\\\')\n            {\n                escaped = true;\n            }\n            else if (ch === '\"')\n            {\n                inDoubleString = false;\n            }\n            continue;\n        }\n\n        if (ch === '\"')\n        {\n            inDoubleString = true;\n            result += ch;\n            continue;\n        }\n\n        if (ch === '\\'')\n        {\n            inSingleString = true;\n            singleBuffer = '';\n            continue;\n        }\n\n        result += ch;\n    }\n\n    if (inSingleString)\n    {\n        // Leave untouched if malformed; caller can still fail safely.\n        return raw;\n    }\n\n    return result;\n}\n\nfunction parseTaskViewJSON(raw, sourceLabel = 'data')\n{\n    if (!raw) return null;\n\n    try\n    {\n        return JSON.parse(raw);\n    }\n    catch (e)\n    {\n        const normalized = normalizeSingleQuotedJSONStringValues(raw);\n        if (normalized !== raw)\n        {\n            try\n            {\n                const parsed = JSON.parse(normalized);\n                console.warn(`[TaskView] Parsed ${sourceLabel} with single-quote fallback. Please provide valid JSON.`);\n                return parsed;\n            }\n            catch (ignored)\n            {\n                // Ignore fallback error and return null below.\n            }\n        }\n\n        return null;\n    }\n}\n\nfunction registerAppStyles(themeManager)\n{\n    themeManager.register('--color-graph-node', 'graph');\n    themeManager.register('--color-graph-text', 'graph');\n    themeManager.register('--color-graph-select', 'graph');\n\n    themeManager.register('--color-accent', 'general');\n    const colorPrimary = themeManager.register('--color-primary', 'general');\n    themeManager.register('--color-primary-text', 'general');\n    themeManager.register('--color-primary-lite', 'hidden', colorPrimary, ColorTransform.lite);\n    themeManager.register('--color-primary-dark', 'hidden', colorPrimary, ColorTransform.dark);\n\n    const colorBackground = themeManager.register('--color-background', 'general');\n    themeManager.register('--color-background-active', 'hidden', colorBackground, ColorTransform.invert);\n    themeManager.register('--color-background-lite', 'hidden', colorBackground, ColorTransform.lite);\n\n    themeManager.register('--color-success', 'general');\n    themeManager.register('--color-warning', 'general');\n\n    const colorSurface = themeManager.register('--color-surface', 'surface');\n    themeManager.register('--color-surface-text', 'surface');\n    themeManager.register('--color-surface-active', 'hidden', colorSurface, ColorTransform.invert);\n    themeManager.register('--color-surface-lite', 'hidden', colorSurface, ColorTransform.lite);\n    themeManager.register('--color-surface-dark', 'hidden', colorSurface, ColorTransform.dark);\n\n    const colorSurfaceError = themeManager.register('--color-surface-error', 'surface');\n    themeManager.register('--color-surface-error-dark', 'hidden', colorSurfaceError, ColorTransform.dark);\n\n    const colorSurfaceSuccess = themeManager.register('--color-surface-success', 'surface');\n    themeManager.register('--color-surface-success-dark', 'hidden', colorSurfaceSuccess, ColorTransform.dark);\n\n    const colorSurfaceWarning = themeManager.register('--color-surface-warning', 'surface');\n    themeManager.register('--color-surface-warning-dark', 'hidden', colorSurfaceWarning, ColorTransform.dark);\n}\n\nclass App extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        App.INSTANCE = this;\n\n        this._toolbarComponent = React.createRef();\n        this._drawerComponent = React.createRef();\n        this._viewport = null;\n        this._labeleditor = null;\n\n        this._themeManager = new ThemeManager();\n        this._exportManager = new ExportManager();\n        this._importManager = new ImportManager();\n\n        this._undoManager = new UndoManager();\n        this._hotKeyManager = new HotKeyManager();\n        this._drawerManager = new DrawerManager();\n        this._menuManager = new MenuManager();\n        this._viewportManager = new ViewportManager();\n        this._renderManager = new RenderManager();\n        this._tooltipManager = new TooltipManager();\n        this._notificationManager = new NotificationManager();\n        this._broadcastManager = new BroadcastManager(this);\n\n        this._session = new Session()\n            .addListener(this._undoManager)\n            .addListener(this._hotKeyManager)\n            .addListener(this._drawerManager)\n            .addListener(this._menuManager)\n            .addListener(this._viewportManager)\n            .addListener(this._renderManager)\n            .addListener(this._tooltipManager)\n            .addListener(this._notificationManager)\n            .addListener(this._broadcastManager)\n            .addListener(this);\n\n        this._taskViewConfig = this.readTaskViewConfig();\n\n        // TODO: This is only used to control transitions (do we really need it?)\n        this._init = false;\n        this._savedUndoCursor = null;\n        this._savedCustomWordsSignature = null;\n        this._hasPersistedTaskContent = false;\n\n        this.state = {\n            hide: false,\n            saveStatus: 'ready',\n            submitEnabled: false\n        };\n\n        this._mediaQuerySmallWidthList = window.matchMedia('only screen and (max-width: 400px)');\n        this._mediaQuerySmallHeightList = window.matchMedia('only screen and (min-height: 400px)');\n\n        // this._notificationManager.pushNotification(\"Welcome to Flap.js\");\n        this.onModuleTitleClick = this.onModuleTitleClick.bind(this);\n        this.onToolbarClearButton = this.onToolbarClearButton.bind(this);\n    }\n\n    readTaskViewConfig()\n    {\n        const baseLink = document.getElementById('default-link');\n        const saveEl = document.getElementById('task-save-url');\n        const submitEl = document.getElementById('task-submit-url');\n        const currentContentEl = document.getElementById('currentContent');\n        const defaultSubmissionEl = document.getElementById('defaultSubmission');\n        const descriptionEl = document.getElementById('description');\n        const tutorialEl = document.getElementById('tutorial');\n\n        if (!baseLink || !saveEl)\n        {\n            return {\n                baseHref: '/',\n                rawSaveUrl: '',\n                rawSubmitUrl: '',\n                submitEnabled: false,\n                description: '',\n                tutorial: '',\n                defaultSubmission: null,\n                content: '',\n                hasCurrentContent: false,\n                type: null,\n                controlWords: [],\n                allowConvert: true\n            };\n        }\n\n        const baseHref = baseLink.getAttribute('href') || '/';\n        const rawSaveUrl = (saveEl.dataset && saveEl.dataset.url) || '';\n        const rawSubmitUrl = submitEl && submitEl.dataset ? submitEl.dataset.url || '' : '';\n        const currentContent = currentContentEl ? (currentContentEl.textContent || '').trim() : '';\n        const defaultSubmissionRaw = defaultSubmissionEl ? (defaultSubmissionEl.textContent || '').trim() : '';\n        const description = descriptionEl ? (descriptionEl.textContent || '').trim() : '';\n        const tutorial = tutorialEl ? (tutorialEl.textContent || '').trim() : '';\n\n        let defaultSubmission = null;\n        if (defaultSubmissionRaw)\n        {\n            defaultSubmission = parseTaskViewJSON(defaultSubmissionRaw, 'defaultSubmission');\n        }\n\n        const type = defaultSubmission && defaultSubmission.type ? String(defaultSubmission.type).toUpperCase() : null;\n        const controlWords = defaultSubmission && defaultSubmission.controlWords ? defaultSubmission.controlWords : [];\n        const rawTaskDefaultContent = defaultSubmission && typeof defaultSubmission.content !== 'undefined'\n            ? defaultSubmission.content\n            : defaultSubmission && typeof defaultSubmission.defaultContent !== 'undefined'\n                ? defaultSubmission.defaultContent\n                : '';\n        let taskDefaultContent = rawTaskDefaultContent;\n        if (taskDefaultContent && typeof taskDefaultContent !== 'string')\n        {\n            try\n            {\n                taskDefaultContent = JSON.stringify(taskDefaultContent);\n            }\n            catch (e)\n            {\n                taskDefaultContent = '';\n            }\n        }\n        const hasDefaultContent = typeof taskDefaultContent === 'string' && taskDefaultContent.trim().length > 0;\n        const allowConvert = defaultSubmission && typeof defaultSubmission.allowConvert === 'boolean'\n            ? defaultSubmission.allowConvert\n            : defaultSubmission && typeof defaultSubmission.allowConversion === 'boolean'\n                ? defaultSubmission.allowConversion\n                : true;\n        let content = currentContent || taskDefaultContent || '';\n        let customWords = [];\n        let hasCustomWordsFromContent = false;\n        if (currentContent)\n        {\n            try\n            {\n                const parsed = JSON.parse(currentContent);\n                if (parsed && typeof parsed === 'object' && (parsed.content || parsed.customWords))\n                {\n                    content = parsed.content || '';\n                    if (Array.isArray(parsed.customWords))\n                    {\n                        customWords = parsed.customWords;\n                        hasCustomWordsFromContent = true;\n                    }\n                }\n            }\n            catch (e)\n            {\n                // Keep content as-is if currentContent isn't a JSON wrapper.\n            }\n        }\n        if (content && typeof content !== 'string')\n        {\n            try\n            {\n                content = JSON.stringify(content);\n            }\n            catch (e)\n            {\n                content = '';\n            }\n        }\n\n        if (!hasCustomWordsFromContent && customWords.length <= 0 && defaultSubmission && Array.isArray(defaultSubmission.customWords))\n        {\n            customWords = defaultSubmission.customWords;\n        }\n\n        return {\n            baseHref,\n            rawSaveUrl,\n            rawSubmitUrl,\n            submitEnabled: !!(rawSubmitUrl && rawSubmitUrl.trim().length > 0),\n            description,\n            tutorial,\n            defaultSubmission,\n            content,\n            defaultContent: taskDefaultContent,\n            customWords,\n            hasCurrentContent: !!currentContent,\n            hasDefaultContent: hasDefaultContent,\n            type,\n            controlWords,\n            allowConvert\n        };\n    }\n\n    resolveTaskViewUrl(rawUrl)\n    {\n        if (!rawUrl) return '';\n        if (/^https?:\\/\\//.test(rawUrl)) return rawUrl;\n        const baseHref = (this._taskViewConfig && this._taskViewConfig.baseHref) || '/';\n        const base = baseHref.endsWith('/') ? baseHref.slice(0, -1) : baseHref;\n        if (!base) return rawUrl.startsWith('/') ? rawUrl : '/' + rawUrl;\n        if (rawUrl.startsWith(base + '/')) return rawUrl;\n        if (rawUrl.startsWith('/')) return base + rawUrl;\n        return base + '/' + rawUrl;\n    }\n\n    updateSaveStatus(status)\n    {\n        this.setState({ saveStatus: status });\n    }\n\n    getUndoCursor()\n    {\n        return this._undoManager.history.length - this._undoManager.offsetIndex;\n    }\n\n    normalizeCustomWords(words)\n    {\n        if (!Array.isArray(words)) return [];\n\n        return words\n            .filter(word => typeof word === 'string')\n            .map(word => word.trim())\n            .filter(word => word.length > 0);\n    }\n\n    getCustomWordsSignature(words)\n    {\n        return JSON.stringify(this.normalizeCustomWords(words));\n    }\n\n    getCurrentCustomWords()\n    {\n        const currentModule = this._session.getCurrentModule();\n        if (currentModule && typeof currentModule.getCustomTestWords === 'function')\n        {\n            const moduleCustomWords = currentModule.getCustomTestWords();\n            if (Array.isArray(moduleCustomWords))\n            {\n                return moduleCustomWords;\n            }\n        }\n\n        return this._taskViewConfig && Array.isArray(this._taskViewConfig.customWords)\n            ? this._taskViewConfig.customWords\n            : [];\n    }\n\n    onCustomWordsChanged(words)\n    {\n        if (this.state.saveStatus === 'saving') return;\n        this.syncSaveStatusWithUndoState(this.getCustomWordsSignature(words));\n    }\n\n    markCurrentStateAsSaved(hasPersistedTaskContent = true, undoCursor = null, customWords = null)\n    {\n        this._savedUndoCursor = typeof undoCursor === 'number' ? undoCursor : this.getUndoCursor();\n        this._savedCustomWordsSignature = this.getCustomWordsSignature(\n            Array.isArray(customWords) ? customWords : this.getCurrentCustomWords()\n        );\n        this._hasPersistedTaskContent = !!hasPersistedTaskContent;\n    }\n\n    syncSaveStatusWithUndoState(currentCustomWordsSignature = null)\n    {\n        if (typeof this._savedUndoCursor !== 'number') return;\n\n        const currentUndoCursor = this.getUndoCursor();\n        const customWordsSignature = typeof currentCustomWordsSignature === 'string'\n            ? currentCustomWordsSignature\n            : this.getCustomWordsSignature(this.getCurrentCustomWords());\n        const savedCustomWordsSignature = typeof this._savedCustomWordsSignature === 'string'\n            ? this._savedCustomWordsSignature\n            : this.getCustomWordsSignature([]);\n        const hasSameCustomWords = customWordsSignature === savedCustomWordsSignature;\n        const saveStatus = this.state.saveStatus;\n        if (currentUndoCursor === this._savedUndoCursor && hasSameCustomWords)\n        {\n            if (saveStatus === 'unsaved')\n            {\n                this.updateSaveStatus(this._hasPersistedTaskContent ? 'saved' : 'ready');\n            }\n            return;\n        }\n\n        if (saveStatus === 'saved' || saveStatus === 'submitted' || saveStatus === 'ready')\n        {\n            this.updateSaveStatus('unsaved');\n        }\n    }\n\n    applyTaskViewConfig(session)\n    {\n        session.setTaskViewConfig(this._taskViewConfig);\n        const hasCurrentContent = !!this._taskViewConfig.hasCurrentContent;\n        this._hasPersistedTaskContent = hasCurrentContent;\n        this.setState({\n            submitEnabled: this._taskViewConfig.submitEnabled,\n            saveStatus: hasCurrentContent ? 'saved' : 'ready'\n        });\n        const currentModule = session.getCurrentModule();\n        const applyType = () =>\n        {\n            if (!currentModule || !this._taskViewConfig.type) return;\n            if (!currentModule.getMachineController) return;\n            const machineController = currentModule.getMachineController();\n            if (machineController && machineController.setMachineType)\n            {\n                machineController.setMachineType(this._taskViewConfig.type);\n            }\n        };\n\n        if (this._taskViewConfig.content)\n        {\n            return this.loadContentToView(this._taskViewConfig.content)\n                .finally(() =>\n                {\n                    applyType();\n                    this.markCurrentStateAsSaved(hasCurrentContent, null, this._taskViewConfig.customWords);\n                });\n        }\n\n        applyType();\n        this.markCurrentStateAsSaved(hasCurrentContent, null, this._taskViewConfig.customWords);\n        return Promise.resolve();\n    }\n\n    getModuleNameFromTaskViewType()\n    {\n        const type = this._taskViewConfig && this._taskViewConfig.type;\n        if (!type) return null;\n        switch (String(type).toUpperCase())\n        {\n        case 'DFA':\n        case 'NFA':\n        case 'FSA':\n            return 'fsa';\n        case 'PDA':\n            return 'pda';\n        default:\n            return null;\n        }\n    }\n\n    getMachineTypeFromContent(content)\n    {\n        if (!content || typeof content !== 'string') return null;\n        try\n        {\n            const parsed = JSON.parse(content);\n            if (!parsed || typeof parsed !== 'object') return null;\n            const machineData = parsed.machineData;\n            if (!machineData || typeof machineData !== 'object') return null;\n            if (!machineData.type) return null;\n            return String(machineData.type).toUpperCase();\n        }\n        catch (e)\n        {\n            return null;\n        }\n    }\n\n    isTaskContentCompatible(content)\n    {\n        const expectedType = this._taskViewConfig && this._taskViewConfig.type\n            ? String(this._taskViewConfig.type).toUpperCase()\n            : null;\n        if (!expectedType) return true;\n        const contentType = this.getMachineTypeFromContent(content);\n        if (!contentType) return true;\n        return contentType === expectedType;\n    }\n\n    getContentFromView()\n    {\n        return this._exportManager.tryExportTargetToData('session', this._session)\n            .then(result => result.data);\n    }\n\n    loadContentToView(content)\n    {\n        if (!content) return Promise.resolve();\n        if (!this.isTaskContentCompatible(content))\n        {\n            const expectedType = String(this._taskViewConfig.type).toUpperCase();\n            const contentType = this.getMachineTypeFromContent(content);\n            console.log(`Skip loading content: expected ${expectedType}, got ${contentType}.`);\n            return Promise.resolve();\n        }\n        return this._importManager.tryImportFileFromData('task.json', '.json', content)\n            .catch(() => {});\n    }\n\n    resetToDefaultContent()\n    {\n        if (!this._taskViewConfig || !this._taskViewConfig.defaultSubmission) return Promise.resolve();\n        const defaultContent = this._taskViewConfig.defaultContent || '';\n        const defaultCustomWords = Array.isArray(this._taskViewConfig.customWords)\n            ? this._taskViewConfig.customWords\n            : [];\n        if (!defaultContent) return Promise.resolve();\n        if (!confirm('Mchten Sie wirklich auf den Startzustand zurcksetzen? Alle ungespeicherten nderungen gehen verloren.'))\n        {\n            return Promise.resolve();\n        }\n        const currentModule = this._session.getCurrentModule();\n        if (currentModule && typeof currentModule.setCustomTestWords === 'function')\n        {\n            currentModule.setCustomTestWords(defaultCustomWords);\n        }\n        this._hasPersistedTaskContent = false;\n        this.updateSaveStatus('ready');\n        return this.loadContentToView(defaultContent)\n            .finally(() => this.markCurrentStateAsSaved(false, null, defaultCustomWords));\n    }\n\n    saveContent(isSubmission = false)\n    {\n        if (isSubmission && !this._taskViewConfig.submitEnabled) return Promise.resolve();\n\n        const rawUrl = isSubmission ? this._taskViewConfig.rawSubmitUrl : this._taskViewConfig.rawSaveUrl;\n        const url = this.resolveTaskViewUrl(rawUrl);\n        if (!url) return Promise.resolve();\n\n        this.updateSaveStatus('saving');\n\n        return this.getContentFromView()\n            .then(content =>\n            {\n                const saveCursor = this.getUndoCursor();\n                const serializedContent = typeof content === 'string' ? content : JSON.stringify(content || '');\n                const currentModule = this._session.getCurrentModule();\n                const moduleCustomWords = currentModule && typeof currentModule.getCustomTestWords === 'function'\n                    ? currentModule.getCustomTestWords()\n                    : null;\n                const fallbackCustomWords = this._taskViewConfig && Array.isArray(this._taskViewConfig.customWords)\n                    ? this._taskViewConfig.customWords\n                    : [];\n                const sourceCustomWords = Array.isArray(moduleCustomWords) ? moduleCustomWords : fallbackCustomWords;\n                const customWords = this.normalizeCustomWords(sourceCustomWords);\n                const persistedContent = !isSubmission\n                    ? JSON.stringify({ content: serializedContent, customWords: customWords })\n                    : serializedContent;\n                return fetch(url, {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ content: persistedContent })\n                }).then(response => ({ response, saveCursor, customWords }));\n            })\n            .then(({ response, saveCursor, customWords }) =>\n            {\n                if (response && response.ok)\n                {\n                    this.markCurrentStateAsSaved(true, saveCursor, customWords);\n                    this.updateSaveStatus(isSubmission ? 'submitted' : 'saved');\n                }\n                else\n                {\n                    this.updateSaveStatus('error');\n                }\n            })\n            .catch(() => this.updateSaveStatus('error'));\n    }\n\n    submitTask()\n    {\n        if (confirm('Mchten Sie diese Aufgabe wirklich abgeben?'))\n        {\n            return this.saveContent(true);\n        }\n        return Promise.resolve();\n    }\n\n    /** @override */\n    componentDidMount()\n    {\n        //Start session\n        const moduleName = this.getModuleNameFromTaskViewType();\n        this._session.startSession(this, moduleName);\n    }\n\n    /** @override */\n    componentWillUnmount()\n    {\n        //Stop session\n        this._session.stopSession(this);\n    }\n\n    /**\n     * Called once by index.js when the window is opened, before\n     * this constructor or any React components are initialized. This also must be\n     * static since React instances are not yet available.\n     */\n    static onWindowLoad()\n    {\n        Broadcast.initialize(BROADCAST_CHANNEL_ID);\n    }\n\n    /**\n     * Called once by index.js when the window is closed. This is the alternative\n     * for clean up since componentWillUnmount() from React will not be called for\n     * window events. This also must be static since React instances are no longer\n     * available.\n     */\n    static onWindowUnload()\n    {\n        if (App.INSTANCE)\n        {\n            App.INSTANCE.componentWillUnmount();\n        }\n    }\n\n    //DuckType\n    onSessionStart(session)\n    {\n        // Default values\n        this._menuManager\n            .addPanelClass(ExportPanel)         // MENU_INDEX_EXPORT\n            .addPanelClass(LanguagePanel)       // MENU_INDEX_LANGUAGE\n            .addPanelClass(ModuleLoaderPanel);  // MENU_INDEX_MODULE\n\n        this._hotKeyManager\n            .registerAltHotKey('Show Hints', () => { IconButton.SHOW_LABEL = !IconButton.SHOW_LABEL; });\n\n        // Only register undo / redo hotkeys if undo is possible\n        if (this._undoManager.getEventHandlerFactory())\n        {\n            this._hotKeyManager\n                .registerHotKey('Undo', [CTRL_KEY, 'KeyZ'], () => this.getUndoManager().undo())\n                .registerHotKey('Redo', [CTRL_KEY, SHIFT_KEY, 'KeyZ'], () => this.getUndoManager().redo());\n        }\n\n        if (!this._tooltipManager.hasTooltips())\n        {\n            this._tooltipManager\n                .addTooltip('Oder du kannst dich entscheiden, nichts zu tun.')\n                .addTooltip('Ich kann dagegen nichts tun.')\n                .addTooltip('Du solltest jedoch wirklich in Erwgung ziehen, etwas zu tun, um unser beider Willen.')\n                .addTooltip('Natrlich ist es dein freier Wille.')\n        }\n\n        this._themeManager.setElement(document.getElementById('root'));\n\n        registerAppStyles(this._themeManager);\n\n        this.applyTaskViewConfig(session);\n        window.saveContent = (isSubmission = false) => this.saveContent(isSubmission);\n        window.submitTask = () => this.submitTask();\n\n        this._init = true;\n    }\n\n    //DuckType\n    onSessionStop(session)\n    {\n        this._init = false;\n\n        this._themeManager.clear();\n        this._importManager.clear();\n        this._exportManager.clear();\n        this._menuManager.setSubtitleComponentClass(null);\n    }\n\n    onModuleTitleClick(e)\n    {\n        const drawer = this._drawerComponent.current;\n        if (!drawer.isDrawerOpen() || !drawer.isCurrentTab(DRAWER_INDEX_ABOUT))\n        {\n            //Open current module info panel\n            drawer.setCurrentTab(DRAWER_INDEX_ABOUT);\n        }\n        else\n        {\n            //On another click... open module change panel\n            const toolbarComponent = this._toolbarComponent.current;\n            toolbarComponent.setCurrentMenu(MENU_INDEX_MODULE);\n        }\n\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    onToolbarClearButton(e)\n    {\n        const currentModule = this._session.getCurrentModule();\n        if (currentModule)\n        {\n            currentModule.clear(this);\n        }\n    }\n\n    getToolbarComponent() { return this._toolbarComponent.current; }\n    getDrawerComponent() { return this._drawerComponent.current; }\n\n    getExportManager() { return this._exportManager; }\n    getImportManager() { return this._importManager; }\n\n    getUndoManager() { return this._undoManager; }\n    getHotKeyManager() { return this._hotKeyManager; }\n    getDrawerManager() { return this._drawerManager; }\n    getMenuManager() { return this._menuManager; }\n    getViewportManager() { return this._viewportManager; }\n    getRenderManager() { return this._renderManager; }\n    getTooltipManager() { return this._tooltipManager; }\n    getNotificationManager() { return this._notificationManager; }\n    getThemeManager() { return this._themeManager; }\n    getBroadcastManager() { return this._broadcastManager; }\n    getTaskViewConfig() { return this._taskViewConfig; }\n\n    getSession() { return this._session; }\n    getCurrentModule() { return this._session.getCurrentModule(); }\n\n    isExperimental() { return true; }\n\n    /** @override */\n    componentDidUpdate()\n    {\n        this._session.updateSession(this);\n\n        const toolbarComponent = this._toolbarComponent.current;\n        const drawerComponent = this._drawerComponent.current;\n        //Disable hotkeys when graph is not in view\n        this._hotKeyManager.setEnabled(\n            !(toolbarComponent && toolbarComponent.isBarOpen()) &&\n            !(drawerComponent && drawerComponent.isDrawerOpen() &&\n                drawerComponent.isDrawerFullscreen())\n        );\n\n        this.syncSaveStatusWithUndoState();\n    }\n\n    renderRenderLayer(renderLayerName, props)\n    {\n        const sessionID = this._session.getSessionID();\n        const renderers = this._renderManager.getRenderersByLayer(renderLayerName);\n        if (renderers && renderers.length > 0)\n        {\n            return renderers.map((R, i) => <R key={sessionID + '.' + R.constructor.name + '.' + i} {...props} />);\n        }\n        else\n        {\n            return null;\n        }\n    }\n\n    /** @override */\n    render()\n    {\n        const session = this._session;\n        const currentModule = session.getCurrentModule();\n        const hasSmallWidth = this._mediaQuerySmallWidthList.matches;\n        const hasSmallHeight = this._mediaQuerySmallHeightList.matches;\n        const isFullscreen = this.state.hide;\n\n        const exportManager = this._exportManager;\n\n        const undoManager = this._undoManager;\n        const drawerManager = this._drawerManager;\n        const menuManager = this._menuManager;\n        const tooltipManager = this._tooltipManager;\n        const toolbarComponent = this._toolbarComponent.current;\n        const hasDefaultContent = !!(this._taskViewConfig && this._taskViewConfig.hasDefaultContent);\n        const dashboardUrl = this.resolveTaskViewUrl('/student/dashboard');\n\n        const drawerPanelClasses = drawerManager.getPanelClasses();\n        const drawerPanelProps = drawerManager.getPanelProps() || { session: session, taskViewConfig: this._taskViewConfig };\n        const menuPanelClasses = menuManager.getPanelClasses();\n        const menuPanelProps = menuManager.getPanelProps() || { session: session };\n\n        return (\n            <div className={Style.app_container + (currentModule ? ' active ' : '')}>\n                <TaskViewButtonBar\n                    ref={this._toolbarComponent}\n                    className={Style.app_bar}\n                    menus={menuPanelClasses}\n                    menuProps={menuPanelProps}\n                    hide={isFullscreen}\n                    saveStatus={this.state.saveStatus}\n                    submitEnabled={this.state.submitEnabled}\n                    canUndo={undoManager.canUndo()}\n                    canRedo={undoManager.canRedo()}\n                    canExport={!exportManager.isEmpty()}\n                    canReset={hasDefaultContent}\n                    onUndo={() => undoManager.undo()}\n                    onRedo={() => undoManager.redo()}\n                    onReset={() => this.resetToDefaultContent()}\n                    onExport={() => exportManager.tryExportFile('image-png', session)}\n                    onSave={(isSubmission = false) => this.saveContent(isSubmission)}\n                    onSubmit={() => this.submitTask()}\n                    onHome={() => { window.location.href = dashboardUrl; }}\n                />\n\n                <DrawerView ref={this._drawerComponent} className={Style.app_content}\n                    panels={drawerPanelClasses}\n                    panelProps={drawerPanelProps}\n                    side={hasSmallWidth ? DRAWER_SIDE_BOTTOM : DRAWER_SIDE_RIGHT}\n                    direction={hasSmallHeight ? DRAWER_BAR_DIRECTION_VERTICAL : DRAWER_BAR_DIRECTION_HORIZONTAL}\n                    hide={isFullscreen}>\n\n                    <UploadDropZone>\n                        <div className=\"viewport\">\n                            <TooltipView mode={tooltipManager.getTransitionMode()}\n                                visible={/* TODO: For the initial fade-in animation */this._init && !undoManager.canUndo()}>\n                                {tooltipManager.getTooltips().map((e, i) => <label key={e + ':' + i}>{e}</label>)}\n                            </TooltipView>\n\n                            {/* RENDER_LAYER_WORKSPACE_PRE */}\n                            {this.renderRenderLayer(RENDER_LAYER_WORKSPACE_PRE)}\n\n                            {/* RENDER_LAYER_WORKSPACE */}\n                            {this.renderRenderLayer(RENDER_LAYER_WORKSPACE)}\n\n                            {/* RENDER_LAYER_WORKSPACE_POST */}\n                            {this.renderRenderLayer(RENDER_LAYER_WORKSPACE_POST)}\n\n                            <FullscreenWidget className={Style.fullscreen_widget} app={this} />\n\n                            <NotificationView notificationManager={this._notificationManager} />\n\n                            {this._hotKeyManager.isEnabled() && <HotKeyView hotKeyManager={this._hotKeyManager} />}\n                        </div>\n                    </UploadDropZone>\n                </DrawerView>\n            </div>\n        );\n    }\n}\nApp.INSTANCE = null;\n\n//For hotloading this class\nexport default hot(App);\n","//Version 0.4.4\nconst changeLog = `\n### Added\n- Equivalence test for Finite Automata with witness string\n\n### Fixed\n- Too large workspace widget\n`.split('\\n');\n\n/*\n//Version 0.4.3\nconst changeLog = `\n### Added\n- The new Bab's tutorial\n\n### Changed\n- App will check for updates only if it can.\n\n### Fixed\n- Missing test highlights.\n- Missing edge formatting.\n- Weird collapse for menu screen.\n`.split('\\n');\n\n//Version 0.4.2\nconst changeLog = `\n### Added\n- Module version is now visible in Options.\n- Change machine type for FA module in the title bar.\n- A new and improved graph picking system.\n- Allow clicking on labels to edit them.\n- Custom node color styles are now applied to exported images.\n- Grayscale image exporting.\n\n### Changed\n- Menu entries are now ordered more logically.\n- Fullscreen mode is available for ALL modules.\n- Trash can looks nicer when red :D\n- A new menu design.\n\n### Removed\n- Unused modules are no longer visible in module selection.\n\n### Fixed\n- Previous labels sometimes show up in future label editors.\n- FA/PDA: Auto-formatting sometimes fails for edge labels.\n- FA/PDA: Initial marker cannot be dragged with left mouse button.\n- FA/PDA: State label editing won't save.\n- FA/PDA: Trash can icon is missing label.\n- FA/PDA: Trash can cannot delete edges.\n- FA/PDA: Missing red border for delete mode.\n`.split('\\n');\n\n//Version 0.4.1\nconst changeLog = [\n    'Experimental mode is now LIVE! :D',\n    'Pushdown Automata module is now available.',\n    'Language is saved across sessions.',\n    'Regular expression scope highlighting.',\n    'Color theme preset loading.',\n    'MIT and Duke theme presets.',\n    'Added linting tests to enforce code style.',\n    'Added Travic CI build pipeline for more build automation.',\n    'Old app mode will be replaced by experimental mode permanently.',\n];\n\n//Version 0.4.0\nconst changeLog = [\n    'Changed default color scheme. Hope you like it!',\n    'Allow double-clicking module name to change modules.',\n    'FIXED: Module change causes app to not respond.',\n    'FIXED: Auto-rename nodes cannot be toggled.'\n];\n\n//Version 0.3.4\nconst changeLog = [\n    'Added meta tags for those coming from a search engine.',\n    'Added Pushdown Automata',\n    'Added a whole NEW EXPERIMENTAL MODE! :D'\n];\n\n//Version 0.3.3\nconst changeLog = [\n    'ADDED: SVG export option (thanks to moreheadm).',\n    'FIXED: Edge cannot be created with default symbols.',\n    'FIXED: Action mode does not show edge creation as an edit.',\n    'FIXED: Wrong undo state for changing initial marker.'\n];\n\n//Version 0.3.2\nconst changeLog = [\n    'FIXED: Allow cross-platform bundle building.',\n    'FIXED: Corrected \\'development\\' mode while in production.',\n    'FIXED: NFA unreachable node checking is wrong.',\n    'FIXED: Unreachable node warnings were not treated as notification warnings.',\n    'Disabled service worker while in \\'development\\' mode.'\n];\n\n//Version 0.3.1\nconst changeLog = [\n    'FIXED: Renaming an uploaded file does not download file with new name.',\n    'This is our first user-reported bug! Hooray!',\n    'Thank you and have a hug whoever you are <3.'\n];\n*/\n\nconst changeVersion = process.env.VERSION;\nconst result = {\n    show: changeLog && changeLog.length > 0,\n    log: '\\nChangelog v' + changeVersion + ':\\n - ' + changeLog.join('\\n - '),\n    version: changeVersion\n};\nexport default result;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport Logger from 'util/logger/Logger.js';\nconst LOGGER_TAG = 'App';\n\nimport App from 'experimental/App.js';\nimport Changelog from 'changelog.js';\n\nconst SHOULD_WARN_USERS_ON_EXIT = false;\n\n//Setup app\nwindow.addEventListener('load', (event) => \n{\n    Logger.out(LOGGER_TAG, `Preparing for '${process.env.NODE_ENV}' environment...'`);\n    Logger.out(LOGGER_TAG, `Loading app version '${process.env.VERSION}'...`);\n\n    try\n    {\n        loadApplication();\n    }\n    catch (e)\n    {\n        throw e;\n    }\n\n    //Warn user before exit\n    window.addEventListener('beforeunload', (event) => \n    {\n        if (SHOULD_WARN_USERS_ON_EXIT)\n        {\n            const message = I18N.toString('alert.window.exit');\n            event = event || window.event;\n            // For IE and Firefox\n            if (event) event.returnValue = message;\n            //For Safari\n            return message;\n        }\n    });\n\n    //Cleanup app\n    window.addEventListener('unload', (event) => \n    {\n        Logger.out(LOGGER_TAG, 'Unloading app...');\n        unloadApplication();\n    });\n\n    //Start app\n    window.requestAnimationFrame(updateApplication);\n});\n\n//Tell the client that an update is available\nif (typeof window['isUpdateAvailable'] === 'function')\n{\n    window.isUpdateAvailable.then(hasUpdate => \n    {\n        if (hasUpdate)\n        {\n            let message = '';\n            if (Changelog && Changelog['show'])\n            {\n                message += Changelog['log'];\n            }\n    \n            Logger.out(LOGGER_TAG, `Found update for version ${process.env.VERSION}...`);\n            window.alert('*** New update available! *** \\n Please restart the browser.' +\n                (message ? '\\n' + message : ''));\n        }\n    });\n}\n\n//Setup application\nvar root;\n\n//Load application\nfunction loadApplication()\n{\n    root = document.getElementById('root');\n\n    if (App['onWindowLoad'])\n    {\n        App.onWindowLoad.call(App);\n    }\n}\n\n//Update application\nfunction updateApplication(time)\n{\n    ReactDOM.render(React.createElement(App), root);\n    window.requestAnimationFrame(updateApplication);\n}\n\n//Unload application\nfunction unloadApplication()\n{\n    if (App['onWindowUnload'])\n    {\n        App.onWindowUnload.call(App);\n    }\n}\n","import React from 'react';\n\nclass CrossIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n            </svg>\n        );\n    }\n}\nexport default CrossIcon;\n","import Exporter from 'util/file/export/Exporter.js';\n\nclass SessionExporter extends Exporter\n{\n    constructor(fileType)\n    {\n        super();\n\n        this._fileType = fileType;\n    }\n\n    onExportSession(session, dst)\n    {\n    }\n\n    onPostExportSession(session, dst)\n    {\n        const currentModule = session.getCurrentModule();\n\n        dst['_metadata'] = {\n            name: session.getProjectName(),\n            module: currentModule.getModuleName(),\n            version: process.env.VERSION + ':' + currentModule.getModuleVersion(),\n            timestamp: new Date().toString()\n        };\n    }\n\n    onStringifySession(session, dst)\n    {\n        return JSON.stringify(dst);\n    }\n\n    /** @override */\n    exportTarget(exportType, target)\n    {\n        return new Promise((resolve, reject) =>\n        {\n            const session = target;\n\n            try\n            {\n                let data = {};\n                this.onExportSession(session, data);\n                this.onPostExportSession(session, data);\n                data = this.onStringifySession(session, data);\n\n                resolve({\n                    name: session.getProjectName() + this._fileType,\n                    type: 'text',\n                    data: data\n                });\n            }\n            catch(e)\n            {\n                reject(e);\n            }\n        });\n    }\n}\n\nexport default SessionExporter;\n","/**\n * An object map that represents the processed export data. These are used as arguments\n * for a downloader to further evaluate and then finally download to the client's machine.\n * \n * Any additional properties are also passed to the downloader.\n * \n * @typedef {Object} ExportData\n * @property {String} name  the file name for the exported object\n * @property {String} type  the download type (this is NOT the same as export type or file type)\n * @property {*} data       the processed target data to put into a file\n */\n\n/**\n * A class that exports a specific target to data. The outputs of this class are usually\n * then passed to a downloader.\n */\nclass Exporter\n{\n    constructor() {}\n\n    /**\n     * Exports the target to an export data object. This is then usually passed to a\n     * downloader to process and download to the client's machine.\n     * \n     * @param {String} exportType the export type for the target\n     * @param {*} target the target to export\n     * @returns {ExportData} the processed export data that represents the target's current state\n     */\n    exportTarget(exportType, target)\n    {\n        return Promise.resolve({\n            name: 'untitled.json',\n            type: 'text',\n            data: JSON.stringify(target)\n        });\n    }\n\n    /**\n     * The representive icon class for this exporter.\n     * \n     * @returns {React.Component} the icon component class\n     */\n    getIconClass() { return null; }\n\n    /**\n     * The label for the exporter.\n     */\n    getLabel() { return 'Export'; }\n\n    /**\n     * The hint for the exporter.\n     */\n    getTitle() { return 'Export'; }\n}\n\nexport default Exporter;","/**\n * Contains utility functions for useful math algorithms.\n * @module MathHelper\n */\n\n/**\n * Generates a guid. (You should use {@link uuid} instead. It is just better.)\n * \n * @returns {String} the globally unique id\n */\nexport function guid()\n{\n    function s4()\n    {\n        return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n    }\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n}\n\n/**\n * Generates a uuidv4.\n * \n * @returns {String} the universally unique id\n */\nexport function uuid()\n{\n    return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\n        (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n    );\n}\n\n/**\n * Interpolates, or lerps, between 2 values by the specified amount, dt.\n * \n * @param {Number} a the initial value\n * @param {Number} b the final value\n * @param {Number} dt the amount changed\n * @returns {Number} the interpolated value\n */\nexport function lerp(a, b, dt)\n{\n    return a * (1 - dt) + b * dt;\n}\n\n/**\n * Generates a number hash for the string. For an empty string, it will return 0.\n * \n * @param {String} [value=''] the string to hash\n * @returns {Number} a hash that uniquely identifies the string\n */\nexport function stringHash(value='')\n{\n    let hash = 0;\n    for(let i = 0, len = value.length; i < len; i++)\n    {\n        hash = Math.imul(31, hash) + value.charCodeAt(i) | 0;\n    }\n    return hash;\n}\n\n/**\n * Calculates the directional vector for the passed-in points.\n * \n * @param {Number} x1 the x component of the source point\n * @param {Number} y1 the y component of the source point\n * @param {Number} x2 the x component of the destination point\n * @param {Number} y2 the y component of the destination point\n * @param {Number} [dist=1] the distance, or length, of the vector\n * @param {Number} [angleOffset=0] additional angle offset from the calculated direction vector\n * @param {Object} [dst={x: 0, y: 0}] the result\n * @returns {Object} dst\n */\nexport function getDirectionalVector(x1, y1, x2, y2, dist=1, angleOffset=0, dst={x: 0, y: 0})\n{\n    const dx = x2 - x1;\n    const dy = y2 - y1;\n    const angle = Math.atan2(dy, dx) + angleOffset;\n    dst.x = Math.cos(angle) * dist;\n    dst.y = Math.sin(angle) * dist;\n    return dst;\n}\n\n/**\n * Calculates the midpoint between the passed-in points.\n * \n * @param {Number} x1 the x component of the source point\n * @param {Number} y1 the y component of the source point\n * @param {Number} x2 the x component of the destination point\n * @param {Number} y2 the y component of the destination point\n * @param {Object} [dst={x: 0, y: 0}] the result\n * @returns {Object} dst\n */\nexport function getMidPoint(x1, y1, x2, y2, dst={x: 0, y: 0})\n{\n    dst.x = x1 + (x2 - x1) / 2;\n    dst.y = y1 + (y2 - y1) / 2;\n    return dst;\n}\n","export const CTRL_KEY = 'Control';\nexport const META_KEY = 'Meta';\nexport const ALT_KEY = 'Alt';\nexport const SHIFT_KEY = 'Shift';\n//NOTE: For more keys, refer to http://keycode.info/\n\nclass HotKeyManager\n{\n    constructor()\n    {\n        this._hotkeys = [];\n        this._cachedEvent = {\n            ctrlKey: false,\n            metaKey: false,\n            altKey: false,\n            shiftKey: false,\n            code: null,\n            key: null\n        };\n        this._prevHotKey = null;\n        this._repeatCount = 0;\n        this._enabled = false;\n\n        this._altHotkey = null;\n\n        this.onKeyDown = this.onKeyDown.bind(this);\n        this.onKeyUp = this.onKeyUp.bind(this);\n    }\n\n    registerHotKey(name, keys, callback)\n    {\n        if (!Array.isArray(keys)) throw new Error('Must be an array of key codes');\n        const ctrlIndex = keys.indexOf(CTRL_KEY);\n        if (ctrlIndex >= 0) keys.splice(ctrlIndex, 1);\n        const metaIndex = keys.indexOf(META_KEY);\n        if (metaIndex >= 0) keys.splice(metaIndex, 1);\n        const altIndex = keys.indexOf(ALT_KEY);\n        if (altIndex >= 0) keys.splice(altIndex, 1);\n        const shiftIndex = keys.indexOf(SHIFT_KEY);\n        if (shiftIndex >= 0) keys.splice(shiftIndex, 1);\n        if (keys.length != 1) throw new Error('Multiple key operations not supported');\n        const charKey = keys[0];\n\n        const ctrl = ctrlIndex >= 0 || metaIndex >= 0;\n        const alt = altIndex >= 0;\n        const shift = shiftIndex >= 0;\n\n        const result = {\n            name: name,\n            localizedKeys: (ctrl ? 'Ctrl + ' : '') +\n        (alt ? 'Alt + ' : '') +\n        (shift ? 'Shift + ' : '') +\n        charKey,\n            charKey: charKey,\n            ctrlKey: ctrl,\n            altKey: alt,\n            shiftKey: shift,\n            callback: callback\n        };\n\n        this._hotkeys.unshift(result);\n\n        return this;\n    }\n\n    //HACK: Cause hotkey manager does not allow 'control' hotkeys. This is the exception.\n    registerAltHotKey(name, callback)\n    {\n        if (this._altHotkey) throw new Error('Only one hotkey can exist for \\'Alt\\'');\n\n        this._altHotkey = {\n            name: name,\n            localizedKeys: 'Alt',\n            charKey: null,\n            ctrlKey: false,\n            altKey: true,\n            shiftKey: false,\n            callback: callback\n        };\n\n        return this;\n    }\n\n    /** @override */\n    onSessionStart(session)\n    {\n        window.addEventListener('keydown', this.onKeyDown);\n        window.addEventListener('keyup', this.onKeyUp);\n\n        this._enabled = true;\n    }\n\n    /** @override */\n    onSessionStop(session)\n    {\n        this._enabled = false;\n\n        this._prevHotKey = null;\n        this._repeatCount = 0;\n        this._hotkeys.length = 0;\n        this._altHotkey = null;\n\n        window.removeEventListener('keydown', this.onKeyDown);\n        window.removeEventListener('keyup', this.onKeyUp);\n    }\n\n    setEnabled(enabled)\n    {\n        this._enabled = enabled;\n    }\n\n    isEnabled()\n    {\n        return this._enabled;\n    }\n\n    findMatchingHotKey(e)\n    {\n        for(const hotkey of this._hotkeys)\n        {\n            if (matchesHotKeyEvent(e, hotkey)) return hotkey;\n        }\n        return null;\n    }\n\n    getCurrentHotKey()\n    {\n        return this._prevHotKey;\n    }\n\n    getCurrentHotKeyRepeatCount()\n    {\n        return this._repeatCount;\n    }\n\n    getCurrentlyPossibleHotKeys(dst=[])\n    {\n        const event = this._cachedEvent;\n        const eventCtrl = event.ctrlKey || event.metaKey;\n        const eventAlt = event.altKey;\n        const eventShift = event.shiftKey;\n        if (!eventCtrl && !eventAlt && !eventShift) return dst;\n\n        let result = null;\n        for(const hotkey of this._hotkeys)\n        {\n            let flag = false;\n            if (eventCtrl ^ hotkey.ctrlKey)\n            {\n                //It's ok, but it is not a complete match...\n                if (!eventCtrl) flag = true;\n                //Nope.\n                else continue;\n            }\n            if (eventAlt ^ hotkey.altKey)\n            {\n                //It's ok, but it is not a complete match...\n                if (!eventAlt) flag = true;\n                //Nope.\n                else continue;\n            }\n            if (eventShift ^ hotkey.shiftKey)\n            {\n                //It's ok, but it is not a complete match...\n                if (!eventShift) flag = true;\n                //Nope.\n                else continue;\n            }\n\n            if (!flag && matchesHotKeyChar(event, hotkey.charKey))\n            {\n                result = hotkey;\n            }\n\n            dst.push(hotkey);\n        }\n\n        if (result) return result;\n        else return dst;\n    }\n\n    onKeyDown(e)\n    {\n        if (!this._enabled) return;\n\n        // As long as it's not an input-like element (cause they have their own hotkeys)\n        if (document.activeElement instanceof HTMLInputElement) return;\n        if (document.activeElement instanceof HTMLTextAreaElement) return;\n        if (document.activeElement.hasAttribute('contenteditable')) return;\n\n        if (!e.repeat)\n        {\n            this.captureKeyEvent(e, false);\n\n            let result = this.findMatchingHotKey(this._cachedEvent);\n            if (!result && matchesHotKeyEvent(e, this._altHotkey)) result = this._altHotkey;\n\n            if (result)\n            {\n                if (this._prevHotKey === result)\n                {\n                    ++this._repeatCount;\n                }\n                else\n                {\n                    this._prevHotKey = result;\n                    this._repeatCount = 0;\n                }\n\n                result.callback();\n\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        }\n    }\n\n    onKeyUp(e)\n    {\n        if (!this._enabled) return;\n\n        if (this.captureKeyEvent(e, true))\n        {\n            this._prevHotKey = null;\n            this._repeatCount = 0;\n        }\n    }\n\n    captureKeyEvent(e, isKeyUp=false)\n    {\n        this._cachedEvent.ctrlKey = e.ctrlKey;\n        this._cachedEvent.metaKey = e.metaKey;\n        this._cachedEvent.altKey = e.altKey;\n        this._cachedEvent.shiftKey = e.shiftKey;\n        this._cachedEvent.code = isKeyUp ? null : (e.code || null);\n        this._cachedEvent.key = isKeyUp ? null : (e.key || null);\n        return isKeyUp && !(this._cachedEvent.ctrlKey || this._cachedEvent.metaKey || this._cachedEvent.altKey || this._cachedEvent.shiftKey);\n    }\n}\n\nexport default HotKeyManager;\n\nfunction matchesHotKeyEvent(e, hotkey)\n{\n    if (!hotkey) return false;\n    if (hotkey.ctrlKey !== (e.ctrlKey || e.metaKey)) return false;\n    if (hotkey.altKey !== e.altKey) return false;\n    if (hotkey.shiftKey !== e.shiftKey) return false;\n    if (hotkey.charKey && !matchesHotKeyChar(e, hotkey.charKey)) return false;\n    return true;\n}\n\nfunction matchesHotKeyChar(e, charKey)\n{\n    if (!charKey) return true;\n    if (e.code && e.code === charKey) return true;\n\n    if (typeof e.key === 'string')\n    {\n        if (charKey.startsWith('Key') && charKey.length === 4)\n        {\n            return e.key.toLowerCase() === charKey.charAt(3).toLowerCase();\n        }\n\n        if (charKey.startsWith('Digit') && charKey.length === 6)\n        {\n            return e.key === charKey.charAt(5);\n        }\n    }\n\n    return false;\n}\n","export const RENDER_LAYER_WORKSPACE_PRE = 'workspace-pre';\nexport const RENDER_LAYER_WORKSPACE = 'workspace';\nexport const RENDER_LAYER_WORKSPACE_POST = 'workspace-post';\n\nclass RenderManager\n{\n    constructor()\n    {\n        this._renderMapping = new Map();\n    }\n\n    addRenderer(layerID, rendererClass)\n    {\n        if (this._renderMapping.has(layerID))\n        {\n            this._renderMapping.get(layerID).push(rendererClass);\n        }\n        else\n        {\n            this._renderMapping.set(layerID, [rendererClass]);\n        }\n        return this;\n    }\n\n    //DuckType(SessionListener)\n    onSessionStart(session)\n    {\n\n    }\n\n    //DuckType(SessionListener)\n    onSessionStop(session)\n    {\n        this._renderMapping.clear();\n    }\n\n    getRenderersByLayer(layerID)\n    {\n        return this._renderMapping.get(layerID);\n    }\n}\n\nexport default RenderManager;\n","import React from 'react';\n\nclass UploadIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z\"/>\n            </svg>\n        );\n    }\n}\nexport default UploadIcon;\n","import React from 'react';\nimport Style from './DefaultNotificationLayout.css';\n\nexport const STYLE_TYPE_DEFAULT = 'default';\nexport const STYLE_TYPE_WARNING = 'warning';\nexport const STYLE_TYPE_ERROR = 'error';\nexport const STYLE_TYPE_SUCCESS = 'success';\n\nclass DefaultNotificationLayout extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const message = this.props.message;\n        const notification = this.props.notification;\n\n        return (\n            <div id={this.props.id}\n                className={Style.notification_container +\n                    ' ' + this.props.styleType +\n                    ' ' + this.props.className}\n                style={this.props.style}>\n                {message &&\n                    message.split('\\n').map((e, i) => <p key={e + ':' + i}>{e}</p>)}\n                {this.props.children}\n                {notification &&\n                    <button onClick={e => notification.close()}>\n                        {I18N.toString('message.action.close')}\n                    </button>}\n            </div>\n        );\n    }\n}\n\nexport default DefaultNotificationLayout;\n","import React from 'react';\n\nclass DownloadIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z\"/>\n            </svg>\n        );\n    }\n}\nexport default DownloadIcon;\n","/* global __webpack_public_path__ */\n\n(function setPublicPath() {\n  if (typeof document === 'undefined') return;\n\n  const body = document.body;\n  const dataAssetsBase = body && body.dataset ? body.dataset.assetsBaseurl : null;\n  const defaultLink = document.getElementById('default-link');\n  const baseHref = defaultLink ? defaultLink.getAttribute('href') : null;\n  const assetsDir = 'dfa-nfa-pda-assets/';\n\n  function ensureTrailingSlash(value) {\n    if (!value) return value;\n    return value.endsWith('/') ? value : value + '/';\n  }\n\n  function stripDotPrefix(value) {\n    return value && value.startsWith('./') ? value.slice(2) : value;\n  }\n\n  function joinPaths(base, path) {\n    if (!base) return path;\n    const baseNormalized = ensureTrailingSlash(base);\n    const pathNormalized = path && path.startsWith('/') ? path.slice(1) : path;\n    return baseNormalized + (pathNormalized || '');\n  }\n\n  function resolveBase(value) {\n    if (!value) return null;\n    if (value.startsWith('http://') || value.startsWith('https://') || value.startsWith('//')) {\n      return ensureTrailingSlash(value);\n    }\n    if (value.startsWith('/')) {\n      return ensureTrailingSlash(value);\n    }\n    const relative = stripDotPrefix(value);\n    if (baseHref) return ensureTrailingSlash(joinPaths(baseHref, relative));\n    return ensureTrailingSlash('/' + (relative || ''));\n  }\n\n  const assetsDirNormalized = ensureTrailingSlash(assetsDir);\n\n  let assetsBase = resolveBase(dataAssetsBase);\n  if (!assetsBase && baseHref) assetsBase = ensureTrailingSlash(joinPaths(baseHref, assetsDir));\n  if (!assetsBase) assetsBase = '/' + assetsDir;\n\n  let webpackBase = assetsBase;\n  if (webpackBase.endsWith(assetsDirNormalized)) {\n    webpackBase = webpackBase.slice(0, webpackBase.length - assetsDirNormalized.length);\n    webpackBase = ensureTrailingSlash(webpackBase || '/');\n  }\n\n  __webpack_public_path__ = webpackBase;\n})();\n","import React from 'react';\nimport Style from './IconButton.css';\n\nclass IconButton extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const { refButton, title, className, ...props } = this.props;\n        const showButtonLabel = IconButton.SHOW_LABEL && title;\n\n        return (\n            <button {...props}\n                ref={refButton}\n                className={Style.icon_button +\n                    (showButtonLabel ? ' hint ' : '') +\n                    ' ' + className}\n                title={title}>\n                {this.props.children}\n                <label>{title}</label>\n            </button>\n        );\n    }\n}\nIconButton.SHOW_LABEL = false;\n\nexport default IconButton;\n"],"names":["_React$Component","PanelContainer","props","_classCallCheck","_callSuper","_inherits","key","value","title","this","React","id","className","Style","panel_container","style","panel_title","panel_content","children","panel_bottom","RGB_WHITE","RGB_BLACK","grayscaleRGB","rgb","dst","arguments","length","undefined","grayscaleAmount","blendRGB","percent","rgb1","rgb2","blendAmount","Math","abs","round","invertRGB","HEXtoRGB","hex","indexOf","slice","Error","red","substring","green","blue","parseInt","RGBtoHEX","toString","Notification","notificationManager","message","layoutID","tags","_notificationManager","_message","_layoutID","_tags","_props","_id","guid","removeNotification","tag","includes","SequenceNotificationLayout","_this$props","notification","onClick","_objectWithoutProperties","_excluded","_extends","notification_container","split","map","e","i","marginBottom","I18N","close","WARNING_LAYOUT_ID","SUCCESS_LAYOUT_ID","SEQUENCE_LAYOUT_ID","NotificationManager","_layouts","Map","_notifications","notificationLayout","set","clearNotifications","push","Array","isArray","_step","flag","_iterator","_createForOfIteratorHelper","s","n","done","hasTag","err","f","splice","pop","_step2","_iterator2","session","registerNotificationLayout","DefaultNotificationLayout","styleType","STYLE_TYPE_DEFAULT","STYLE_TYPE_WARNING","STYLE_TYPE_ERROR","STYLE_TYPE_SUCCESS","has","get","Logger","result","console","call","out","_React$PureComponent","ExpandDownIcon","xmlns","width","height","viewBox","d","DRAWER_WIDTH_CSSVAR","DRAWER_WIDTH_TYPE_FULL","DRAWER_SIDE_BOTTOM","DRAWER_SIDE_RIGHT","DRAWER_BAR_DIRECTION_VERTICAL","DRAWER_BAR_DIRECTION_HORIZONTAL","DrawerView","_this","ref","drawerElement","state","open","tabIndex","soloClass","viewportColor","_handlingGrab","_handlingResize","_isfull","_hasintent","_prevWidth","_resizeTimeout","_resizeEndTimeout","_sideways","onDrawerHandleGrab","bind","onDrawerHandleRelease","onDrawerHandleMove","onDrawerExpand","onWindowResize","window","addEventListener","removeEventListener","callback","setDrawerWidth","setState","prev","panels","color","hasIntent","drawerSide","side","drawerOffsetY","getBoundingClientRect","top","documentSize","document","documentElement","clientHeight","clientWidth","getCSSDrawerWidth","setProperty","minSize","toggleDrawer","_this2","setTimeout","clearTimeout","isDrawerSideBottom","clientY","clientX","_this3","drawerPanels","drawerDirection","direction","shouldDrawerHide","hide","drawerSoloClass","isDrawerOpen","shouldDrawerBarSideways","showDrawerHandle","shouldDrawerOpenFull","shouldHideDrawerContent","showDrawerTabs","viewportStyle","app_content","app_viewport","app_drawer","drawer_handle","onMouseDown","drawer_content","drawer_content_bar","IconButton","drawer_tab_expander","current","isCurrentTab","disabled","drawer_tab","setCurrentTab","drawer_content_panel_container","drawer_content_panel","ComponentClass","drawer_panel_container","drawer_panel","panelProps","drawer","getComputedStyle","getPropertyValue","replace","UndoIcon","RedoIcon","DEFAULT_MENU_INDEX","TaskViewButtonBar","menuIndex","menus","shouldOpen","_ref","label","IconClass","icon","type","button","menuProps","saveStatus","submitEnabled","canUndo","canRedo","canExport","canReset","onUndo","onRedo","onReset","onExport","onHome","isBarOpen","safeMenuProps","ToolbarMenu","statusMap","ready","unsaved","saving","saved","error","submitted","status","taskview_bar","button_bar","renderButton","CrossIcon","DownloadIcon","controls","concat","status_icon","onSave","onSubmit","closeBar","menu_container","toolbar","RANDOM_MODE","ONESHOT_MODE","TooltipView","_tooltipTimeout","index","initial","mode","visible","count","nextIndex","floor","random","setTooltipIndex","tooltipIndex","updateTooltip","tooltip_container","child","opacity","UploadDropZone","_waiting","onDragEnter","onDragLeave","onFileDrop","preventDefault","stopPropagation","dataTransfer","fileBlob","items","dataItems","file","kind","getAsFile","dataFiles","files","clear","clearData","isWaitingForFile","upload_container","UploadIcon","upload_icon","only","NotificationView","notifications_container","getNotifications","getLayoutID","NotificationLayout","getNotificationLayout","getID","getMessage","getProps","IconStateButton","prevIndex","FullscreenIcon","FullscreenExitIcon","FullscreenWidget","app","fullscreen_button","ExportPanel","exportType","exporter","getApp","getExportManager","getExporterByExportType","SessionExporter","getIconClass","getLabel","panel_button","tryExportFile","exportTypes","getExportTypes","renderExporterButton","LanguagePanel","localizedName","langFile","language_button","fetchLanguageFile","language_button_list","renderLanguageButton","Modules","name","version","experimental","fetch","then","_","_ref2","_ref3","ModuleLoaderPanel","moduleKey","moduleInfo","useExperimental","isExperimental","module_button","restartSession","module_button_list","Object","keys","renderModuleButton","dark","inverted","ColorHelper","invert","lite","downloadURL","filename","url","element","createElement","headerIndex","setAttribute","display","body","appendChild","click","removeChild","Promise","resolve","Downloader","fileName","downloadType","fileData","opts","_Downloader","TextDownloader","data","encodeURIComponent","getFileExtFromName","lastIndexOf","SVGImageDownloader","SVGElement","fileExt","imageType","blob","svg","svgString","XMLSerializer","serializeToString","Blob","reject","URL","createObjectURL","canvas","ctx","getContext","pixelRatio","devicePixelRatio","setTransform","image","Image","onload","drawImage","revokeObjectURL","imageDataType","imageURI","toDataURL","src","_TextDownloader","JSONDownloader","JSON","stringify","DownloadManager","_downloaders","addDownloader","downloader","_len","downloadTypes","_key","_i","_downloadTypes","downloaders","getDownloadersByDownloadType","reduce","acc","downloadFile","size","ExportManager","_exporters","_exportTypes","_downloaderManager","_i2","_dst","unregisterExportType","target","tryExportTargetToData","tryDownloadFile","exportTarget","values","_Uploader","TextUploader","reader","FileReader","event","code","readAsText","Uploader","ImportManager","_importers","_metaTypes","_textUploader","importer","fileTypes","_fileTypes","fileType","_addFileType","importers","_removeFileType","fileExtIndex","metaTypes","sort","a","b","patternA","match","patternB","File","uploadFile","tryImportFileFromData","metaType","endsWith","getImportersByFileType","_step3","_iterator3","importFileData","from","join","LOGGER_TAG","MODULE_TIMEOUT","Session","_name","_module","_moduleClass","_moduleStarted","_app","_sessionID","_listeners","_taskViewConfig","listener","moduleName","urlParams","parser","href","search","pair","decodeURIComponent","URLHelper","location","ModuleClass","forceUpdate","initialize","onSessionStart","alert","stopSession","startSession","update","onSessionStop","destroy","getElementById","string","innerHTML","separator","trim","config","DrawerManager","_panelClasses","_panelProps","panelClass","MenuManager","_subtitleComponentClass","componentClass","getToolbarComponent","ViewportManager","_viewClasses","_viewProps","viewClass","HotKeyView","_cachedHotKeys","_cacheTimeout","hotKeyManager","showHotKeys","isEnabled","getCurrentlyPossibleHotKeys","useCount","getCurrentHotKeyRepeatCount","currentHotKey","getCurrentHotKey","hotkey_container","isActive","localizedKeys","hotkey","hotkey_label","hotkey_name","UndoManager","history","offsetIndex","_handlerFactory","factory","args","handler","captureEventAsHandler","eventHandler","unshift","applyUndo","applyRedo","TooltipManager","_tooltips","_transitionMode","transitionMode","tooltip","StyleEntry","_value","Theme","themeName","styleMapping","_styles","request","XMLHttpRequest","onreadystatechange","readyState","responseText","onerror","setRequestHeader","send","themeData","line","startsWith","variableName","SourceStyleEntry","_StyleEntry","styleManager","sourceStyle","sourceTransform","getComputedValue","_styleManager","_children","_source","_sourceTransform","propagateChange","sourceValue","getValue","newValue","setComputedValue","updateValue","DEFAULT_THEME_NAME","ThemeManager","_groups","_element","_elementTheme","_theme","groupName","styleEntry","computedValue","setValue","addStyle","styleGroup","removeStyle","getName","theme","styleName","themeStyle","getStyleByName","getSourceStyle","elementStyle","reset","fetchThemeFile","themeFile","loadThemeFile","Broadcast","_channel","channelName","isSupported","BroadcastChannel","onmessage","onBroadcastMessage","addListener","removeListener","sendMessage","source","destination","assign","postMessage","ev","messageType","messageSource","messageDestination","getListeners","getChannel","self","RemoteSession","sessionID","sessionName","_sessionName","SESSION_START_MESSAGE_TYPE","SESSION_UPDATE_MESSAGE_TYPE","SESSION_STOP_MESSAGE_TYPE","BroadcastManager","_session","_remoteSessions","_handlers","setBroadcastManager","stringHash","getSessionID","parseTaskViewJSON","raw","sourceLabel","parse","normalized","inDoubleString","inSingleString","escaped","singleBuffer","ch","charAt","normalizeSingleQuotedJSONStringValues","parsed","warn","ignored","App","INSTANCE","_toolbarComponent","_drawerComponent","_viewport","_labeleditor","_themeManager","_exportManager","_importManager","_undoManager","_hotKeyManager","HotKeyManager","_drawerManager","_menuManager","_viewportManager","_renderManager","RenderManager","_tooltipManager","_broadcastManager","readTaskViewConfig","_init","_savedUndoCursor","_savedCustomWordsSignature","_hasPersistedTaskContent","_mediaQuerySmallWidthList","matchMedia","_mediaQuerySmallHeightList","onModuleTitleClick","onToolbarClearButton","baseLink","saveEl","submitEl","currentContentEl","defaultSubmissionEl","descriptionEl","tutorialEl","baseHref","rawSaveUrl","rawSubmitUrl","description","tutorial","defaultSubmission","content","hasCurrentContent","controlWords","allowConvert","getAttribute","dataset","currentContent","textContent","defaultSubmissionRaw","String","toUpperCase","taskDefaultContent","defaultContent","hasDefaultContent","allowConversion","customWords","hasCustomWordsFromContent","_typeof","rawUrl","test","base","words","filter","word","normalizeCustomWords","currentModule","getCurrentModule","getCustomTestWords","moduleCustomWords","syncSaveStatusWithUndoState","getCustomWordsSignature","hasPersistedTaskContent","undoCursor","getUndoCursor","getCurrentCustomWords","currentCustomWordsSignature","currentUndoCursor","hasSameCustomWords","updateSaveStatus","setTaskViewConfig","applyType","getMachineController","machineController","setMachineType","loadContentToView","markCurrentStateAsSaved","machineData","expectedType","contentType","getMachineTypeFromContent","isTaskContentCompatible","log","defaultCustomWords","confirm","setCustomTestWords","_this4","isSubmission","resolveTaskViewUrl","getContentFromView","saveCursor","serializedContent","fallbackCustomWords","sourceCustomWords","persistedContent","method","headers","response","ok","saveContent","getModuleNameFromTaskViewType","_this5","addPanelClass","registerAltHotKey","SHOW_LABEL","getEventHandlerFactory","registerHotKey","CTRL_KEY","getUndoManager","undo","SHIFT_KEY","redo","hasTooltips","addTooltip","setElement","themeManager","register","colorPrimary","ColorTransform","colorBackground","colorSurface","colorSurfaceError","colorSurfaceSuccess","colorSurfaceWarning","registerAppStyles","applyTaskViewConfig","submitTask","setSubtitleComponentClass","setCurrentMenu","updateSession","toolbarComponent","drawerComponent","setEnabled","isDrawerFullscreen","renderLayerName","renderers","getRenderersByLayer","R","constructor","_this6","hasSmallWidth","matches","hasSmallHeight","isFullscreen","exportManager","undoManager","drawerManager","menuManager","tooltipManager","dashboardUrl","drawerPanelClasses","getPanelClasses","drawerPanelProps","getPanelProps","taskViewConfig","menuPanelClasses","menuPanelProps","app_container","app_bar","isEmpty","resetToDefaultContent","getTransitionMode","getTooltips","renderRenderLayer","RENDER_LAYER_WORKSPACE_PRE","RENDER_LAYER_WORKSPACE","RENDER_LAYER_WORKSPACE_POST","fullscreen_widget","componentWillUnmount","hot","changeLog","changeVersion","process","show","root","updateApplication","time","ReactDOM","requestAnimationFrame","onWindowLoad","onWindowUnload","isUpdateAvailable","hasUpdate","Changelog","_Exporter","_fileType","getProjectName","module","getModuleName","getModuleVersion","timestamp","Date","onExportSession","onPostExportSession","onStringifySession","Exporter","s4","lerp","dt","hash","len","imul","charCodeAt","getDirectionalVector","x1","y1","x2","y2","dist","angleOffset","x","y","dx","dy","angle","atan2","cos","sin","getMidPoint","_hotkeys","_cachedEvent","ctrlKey","metaKey","altKey","shiftKey","_prevHotKey","_repeatCount","_enabled","_altHotkey","onKeyDown","onKeyUp","ctrlIndex","metaIndex","altIndex","shiftIndex","charKey","ctrl","alt","shift","enabled","matchesHotKeyEvent","eventCtrl","eventAlt","eventShift","matchesHotKeyChar","activeElement","HTMLInputElement","HTMLTextAreaElement","hasAttribute","repeat","captureKeyEvent","findMatchingHotKey","isKeyUp","toLowerCase","_renderMapping","layerID","rendererClass","dataAssetsBase","assetsBaseurl","defaultLink","assetsDir","assetsDirNormalized","ensureTrailingSlash","assetsBase","relative","stripDotPrefix","joinPaths","resolveBase","webpackBase","__webpack_public_path__","path","refButton","showButtonLabel","icon_button"],"ignoreList":[],"sourceRoot":""}